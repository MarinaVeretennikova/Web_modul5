<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Функции форматного вывода printf() и sprintf(). Строковые функции PHP.</title>
<link rel="StyleSheet" type="text/css" href="book4.css" tppabs="http://site/bookphp/book4.css">
<link rel="StyleSheet" type="text/css" href="code.css" tppabs="http://site/bookphp/code.css">
</head>
<body bottommargin="0" marginheight="0" marginwidth="0" rightmargin="0" leftmargin="0" topmargin="0">
<table style="border-bottom-style: solid; border-width: 4px; border-color: #BABABA" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#D8F0FB">
    <tr valign="top">
        <td style="padding-left: 50" height="18" colspan="2">
            <a href="http://www.softtime.ru/" title="IT-студия SoftTime"><img src="images/softtime.gif" tppabs="http://site/bookphp/images/softtime.gif" border="0" width="137" height="18" vspace="10"></a>                    
        </td>
        <td valign="middle" align="right">  
            <a style="color: #607683; font-size: 11px; font-family: Arial, Helvetica, sans-serif;" href="mailto:softtime@softtime.ru">Написать письмо авторам</a>
        </td>
        <td width=10%>&nbsp;</td>
    </tr>
</table>
<table border="0" cellspacing="17" >
    <tr valign="bottom">
        <td width=7%>&nbsp;</td>
        <td width="30%" align="center"><h1 style="font-size: 36; padding-top: 20px;  margin: 0px">УЧЕБНИК&nbsp;PHP</h1></td>
        <td align="center"><img src="images/help.gif" tppabs="http://site/bookphp/images/help.gif" border="0" width="40" height="25" alt=""><br>
            <a class=a1 href="http://www.softtime.ru/bookphp/help.php"  title="Справочник функций языка PHP 4 на сайте IT-студии <SoftTime>"><b>справочник&nbsp;функций&nbsp;<Оnline></b></a>
        </td>
        <td align="center"><img src="images/aboutbook.gif" tppabs="http://site/bookphp/images/aboutbook.gif" border="0" width="25" height="25" alt=""><br>
            <a title="Об учебнике и его авторах" class=a1 href="aboutbook.php.htm" tppabs="http://site/bookphp/aboutbook.php"><b>Об&nbsp;учебнике</b></a>
        </td>
        <td align="center"><img src="images/updatebook.gif" tppabs="http://site/bookphp/images/updatebook.gif" border="0" width="40" height="25" alt=""><br>
            <a target="_blank" title="Проверить обновления учебника" class=a1 href="http://www.softtime.ru/info/bookphp.php"><b>Обновление</b></a>
        </td>       
    </tr>
</table><br>
<a name="up"></a>
<table border="0" cellspacing="0" cellpadding="0">
    <tr valign="top">
        <td width="25%">
            <table border="0" width="100%">
                <tr>
                    <td style="background-image: url(images/linebook1.gif); background-repeat: no-repeat"  height="5" width="213"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
                </tr>
                <tr align="left">
                    <td><p style="color: #1020E3; font-size: 16px; margin-left: 10"><b>Оглавление</b></p></td>
                </tr>
                <tr>
                    <td style="background-image: url(images/linebook2.gif); background-repeat: no-repeat" height="7"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
                </tr>
                <tr>
                    <td width="213">
                        <ol>
                            <li><a class=bookmenu href="gl1_1.php.htm" tppabs="http://site/bookphp/gl1_1.php">Основы PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl2_1.php.htm" tppabs="http://site/bookphp/gl2_1.php">Операторы языка PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl3_1.php.htm" tppabs="http://site/bookphp/gl3_1.php">Строковые функции</a></li>
                                                            <div id="activechapter">                                                        
                                    <p class=subchapter><a class=bookmenu href="gl3_1.php.htm" tppabs="http://site/bookphp/gl3_1.php"><nobr>Строковые функции</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_2.php.htm" tppabs="http://site/bookphp/gl3_2.php"><nobr>Htmlspecialchars</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_3.php.htm" tppabs="http://site/bookphp/gl3_3.php"><nobr>Поиск в тексте</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_4.php.htm" tppabs="http://site/bookphp/gl3_4.php"><nobr>Функции strlen(), chr() и ord()</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_5.php.htm" tppabs="http://site/bookphp/gl3_5.php"><nobr>Trim-функции</nobr></a></b></p>
                                    <p class=subchapter><b><a class=bookmenu href="gl3_6.php.htm" tppabs="http://site/bookphp/gl3_6.php"><nobr>Форматный вывод</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_7.php.htm" tppabs="http://site/bookphp/gl3_7.php"><nobr>Преобразование кодировки</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_8.php.htm" tppabs="http://site/bookphp/gl3_8.php"><nobr>Работа с бинарными данными</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_9.php.htm" tppabs="http://site/bookphp/gl3_9.php"><nobr>Работа с блоками текста</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_10.php.htm" tppabs="http://site/bookphp/gl3_10.php"><nobr>Объединение/ разделение строк</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_11.php.htm" tppabs="http://site/bookphp/gl3_11.php"><nobr>Сравнение строк</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_12.php.htm" tppabs="http://site/bookphp/gl3_12.php"><nobr>Работа с URL</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_13.php.htm" tppabs="http://site/bookphp/gl3_13.php"><nobr>Преобразование регистра</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_14.php.htm" tppabs="http://site/bookphp/gl3_14.php"><nobr>Заключение</nobr></a></b></p>
                                    
                            <li><a class=bookmenu href="gl4_1.php.htm" tppabs="http://site/bookphp/gl4_1.php">Массивы</a>
                                
                            </li>                                                           
                            <li><a class=bookmenu href="gl5_1.php.htm" tppabs="http://site/bookphp/gl5_1.php">Функции</a>
                                                        </li>
                            <li><a class=bookmenu href="gl6_1.php.htm" tppabs="http://site/bookphp/gl6_1.php">Работа с файлами</a>
                                                        </li>
                            <li ><a class=bookmenu href="gl7_1.php.htm" tppabs="http://site/bookphp/gl7_1.php">Регулярные выражения</a>
                                                        </li>
                            <li ><a class=bookmenu href="gl8_1.php.htm" tppabs="http://site/bookphp/gl8_1.php">Сессии и cookies в PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl9_1.php.htm" tppabs="http://site/bookphp/gl9_1.php">Работа с FTP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl10_1.php.htm" tppabs="http://site/bookphp/gl10_1.php">Проверка данных</a>
                                                        </li>
                            <li><a class=bookmenu href="gl11_1.php.htm" tppabs="http://site/bookphp/gl11_1.php">Гостевая книга</a>
                                                        </li>
                            <li class="newchaptr"><a class=bookmenu href="gl12_1.php.htm" tppabs="http://site/bookphp/gl12_1.php">PHP и MySQL</a>
                                                        </li>
                            
                        </ol>
                        <p><i>Продолжение следует</i></p>
                    </td>
                </tr>
            </table>
        </td>
        <td ><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<br><br>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<table border="0" cellpadding="0" cellspacing="0" height="70">
    <tr>
        <td rowspan="3" width="70"><img src="images/book.gif" tppabs="http://site/bookphp/images/book.gif" border="0" width="59" height="44" alt=""></td>
        <td height="50" valign="middle"><h1 class=namepage>Строковые функции PHP</h1></td>
    </tr>
    <tr>
        <td height="7px" bgcolor="#9FB6C9"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
    </tr>
    <tr><td height="13"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td></tr>
</table><table border="0" align="right" cellpadding="0" cellspacing="7">
    <tr valign="middle" align="center">
        <td><img src="images/arrowleft.gif" tppabs="http://site/bookphp/images/arrowleft.gif" border="0" width="10" height="17" alt=""></td>
        <td><a class=a1 href="gl3_5.php.htm" tppabs="http://site/bookphp/gl3_5.php">Предыдущая</a></td>
        <td width="1" bgcolor="silver"></td>
        <td><a class=a1 href="gl3_7.php.htm" tppabs="http://site/bookphp/gl3_7.php">Следующая</a></td>
        <td><img src="images/arrowright.gif" tppabs="http://site/bookphp/images/arrowright.gif" border="0" width="10" height="17" alt=""></td>
    </tr>
    <td colspan="5" bgcolor="silver"></td>
</table>
<h1 class=p1>Функции форматного вывода. Спецификаторы преобразования</h1>
<table border="0" cellspacing="10">
    <tr valign="top">
        <td>
            <a class=bluelink href="#1" title="Функция форматирования и вывода результатов в выходной поток">printf()</a>&nbsp;<br>
        </td>
        <td>
            <a class=bluelink href="#1" title="Функция форматирования. Возвращает строку.">sprintf()</a>&nbsp;<br>      
        </td>
        <td>
            <a class=bluelink href="#2" title="Функция интерпретации строки согласно формату">sscanf()</a>&nbsp;<br>        
        </td>
    </tr>
</table>
<br>
<a name=1></a>
<h1 class=p1>printf() и sprintf()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
int <b>printf</b><em class=gr>(</em>string <b>format</b> [, mixed <b>args</b>]<em class=gr>)</em>
string <b>sprintf</b><em class=gr>(</em>string <b>format</b> [, mixed <b>args</b>]<em class=gr>)</em>
</pre></blockquote>


<p class=text>Об этих функциях мы поговорим несколько подробнее, чем о предыдущих функциях работы со строками, нами рассмотренных. Сразу скажем, что эти две функции предназначены для форматного вывода и что отличаются они тем, что функция <b>printf</b>() производит форматирование и выводит результаты в выходной поток (браузер или консоль), а <b>sprintf</b>() после осуществления требуемого форматирования просто возвращает строку. </p>
<p class=text>С одной стороны этими функциями можно пользоваться просто как функциями вывода:</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>printf</b><em class=gr>(</em>"Hello!"<em class=gr>)</em>; // <em class=comnt>выводит  "Hello!"</em> 
   <b>sprintf</b><em class=gr>(</em>"Hello!"<em class=gr>)</em>; // <em class=comnt>сама по себе ничего не выводит, </em>
   <b>$str</b> = <b>sprintf</b><em class=gr>(</em>"Hello!"<em class=gr>)</em>; // <em class=comnt>а просто возвращает строку,</em>
   <b>printf</b><em class=gr>(</em><b>$str</b><em class=gr>)</em>; // <em class=comnt>которую затем можно вывести в выходной поток</em>
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>Но использовать их только так, как мы сейчас продемонстрировали – простое расточительство, так как эти функции способны на большее. Дело в том, что аргумент <b>format</b> этих функций представляет собой строку, содержащую специальные символы, использующиеся при форматировании данных, содержащихся в списке аргументов. Эти спецсимволы называются спецификаторами преобразования, а символы, которые остаются неизменными при форматировании строки, называют директивами. </p>
<p class=text>Спецификация определяется символом &quot;<b>%</b>&quot;, за которым может следовать до пяти спецификаторов в следующем порядке:</p>
<ol>
<li><b>Спецификатор заполнения</b>
<blockquote>Устанавливает символ, которым строка заполняется до заданного размера. По умолчанию используется пробел. Спецификатор заполнения действует только при наличии спецификатора минимальной ширины</blockquote>
<li><b>Спецификатор выравнивания</b>
<blockquote>По умолчанию дополнение строки до минимальной ширины производится с левого края (т.е., строка выравнивается по правому краю). Если добавлен символ дефиса, то строка выравнивается по левому краю </blockquote>
<li><b>Спецификатор минимальной ширины</b>
<blockquote>Представляет собой целое число, задающее минимальный размер форматированной строки. Если переданная строка меньше, то она дополняется символами, указанными в спецификаторе заполнения</blockquote>
</li>
<li><b>Спецификатор точности</b>
<blockquote>Предназначен для указания количества десятичных знаков в представлении чисел с плавающей точкой. При применении этого спецификатора для форматирования строк, он определяет максимальное количество символов, которое нужно взять из переданной строки</blockquote>
<li><b>спецификатор типа</b>
<blockquote>Этот спецификатор предназначен для указания типа данных, которые переданы в качестве аргумента. Спецификатор может принимать одно из следующих значений:</blockquote>
<ul>
  <li>b – целое число, представляемое в двоичном виде;</li>
  <li>с – целое число, представляемое в виде символа с тем же ASCII кодом;</li>
  <li>d – целое число, представляемое в десятичном виде;</li>
  <li>f – число с плавающей точкой, представляемое в виде десятичной дроби;</li>
  <li>o – целое число, представляемое в восьмеричном виде;</li>
  <li>s – строка;</li>
  <li>x – целое число, представляемое в шестнадцатеричном виде в нижнем регистре;</li>
  <li>X – целое число,  представляемое в шестнадцатеричном виде в верзнем регистре</li>
</ul>
</li>
</ol>
<p class=text>Теперь, после разговора о спецификаторах типа, выведем с помощью функции <b>printf()</b> строку в формате даты <b>dd/mm/yyyy</b>. Следующий код выводит в результате строку &quot;<b>02/03/2003</b>&quot;:
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$day</b> = 2;
   <b>$month</b> = 3;
   <b>$year</b> = 2003;
   <b>printf</b>("%02d/%02d/%04d", <b>$day</b>, <b>$month</b>, <b>$year</b>);
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=prim><b><i>Результат:</i></b></p>
<table border="0" summary="">
    <tr>
        <td colspan="2"><img src="images/gl3_2.gif" tppabs="http://site/bookphp/images/gl3_2.gif" border="0" width="399" height="90" alt=""></td>
    </tr>
    <tr><td width="20">&nbsp;</td>
        <td><p class=html>
            02/03/2003
        </td>
    </tr>
</table>
<p class=text>В этом примере, месяц и день мы форматируем как двузначные числа, а год – как четырехзначное. При этом мы указываем, что целые числа дополняются до минимальной длины нулями слева:
<b>%04d</b> </p>
<p class=text>Первый символ – спецификатор заполнения и он равен нулю. Так как дополнение дописывается к началу числа, спецификатор выравнивания отсутствует. Спецификатор минимальной ширины равен двум. Спецификатор точности также отсутствует, так как мы форматируем целое число. Спецификатор типа представлен символом <b>d</b>, так как мы форматируем число как десятичное целое.</p>
<p class=text>Приведем еще один пример.</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$value</b> = 19;
   <b>printf</b>("%.3f", <b>$value</b>);
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>Этот скрипт выводит число 19 в виде 19.000</p>
<br>

<a name=2></a>
<p class=text>Еще одна форматная функция</p>
<h1 class=p1>функция sscanf()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
mixed <b>sscanf</b><em class=gr>(</em>string <b>str</b>, string <b>format</b> [, string <b>var1</b> ...]<em class=gr>)</em>
</pre></blockquote>

<p class=text>Эта функция является полной противоположностью функции <b>printf()</b>. Она интерпретирует строку <b>str</b> согласно формату <b>format</b>, аналогично спецификации <b>printf()</b>. При указании только двух аргументов полученные значения возвращаются как массив.</p>
<p class=text>Давайте рассмотрим такой пример. Пусть у нас есть строка, в которой находится информация о названии и серийном номере изделия в виде &quot;maxtor/203-5505&quot; и нам надо вытащить из нее серийный номер. Пишем вот такой скриптик:</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$product</b> = &quot;maxtor/203-5505&quot;;
   <b>$str</b> = sscanf(<b>$product</b>,&quot;maxtor/%3d-%4d&quot;);
   <em class=gr>echo (</em>&quot;<b>$str</b>[0]-<b>$str</b>[1]&quot;<em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=prim><b><i>Результат:</i></b></p>
<table border="0" summary="">
    <tr>
        <td colspan="2"><img src="images/gl3_2.gif" tppabs="http://site/bookphp/images/gl3_2.gif" border="0" width="399" height="90" alt=""></td>
    </tr>
    <tr><td width="20">&nbsp;</td>
        <td><p class=html>
            203-5505
        </td>
    </tr>
</table>


<p class=text>Не забывайте, что если не указываете в функции необязательные аргументы, то на выходе получите массив, и поэтому при выводе мы работаем со значениями массива.</p>
<p class=text>Давайте поработаем еще с датой изготовления этого изделия, которая нам явилась в виде 
&quot;<b>august 10 2003</b>&quot;, а нам надо чтоб она выводилась в виде &quot; <b>10 aug 2003</b>&quot;. Работаем.
</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$date</b> = &quot;<b>august 10 2003</b>&quot;;
   <b>list</b><em class=gr>(</em><b>$month</b>, <b>$day</b>, <b>$year</b><em class=gr>)</em> = sscanf(<b>$date</b>, &quot;%s %d %d&quot;<em class=gr>)</em>;
   <b>echo</b><em class=gr>(</em>&quot;Date: <b>$day</b>-&quot;.<b>substr</b><em class=gr>(</em><b>$month</b>,0,3).&quot;-<b>$year</b>&quot;<em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>

<p class=prim><b><i>Результат:</i></b></p>
 <table border="0" summary="">
    <tr>
        <td colspan="2"><img src="images/gl3_2.gif" tppabs="http://site/bookphp/images/gl3_2.gif" border="0" width="399" height="90" alt=""></td>
    </tr>
    <tr><td width="20">&nbsp;</td>
        <td><p class=html>
            Date: 10-aug-2003
        </td>
    </tr>
</table>

<p class=text>Важное замечание: при указании необязательных параметров их надо передавать по ссылке (ссылка обозначается  указанием символа &quot;<b>&</b>&quot; перед переменной).</p>
<p class=text>Пример, в котором используются дополнительные необязательные параметры:</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$book</b> = &quot;1\tThinking in PHP&quot;;
   <b>$str</b> = <b>sscanf</b><em class=gr>(</em><b>$book</b>,&quot;%d\t%s %s %s&quot;, &<b>$id</b>, &<b>$first</b>, &<b>$second</b>, &<b>$last</b><em class=gr>)</em>;
   <em class=gr>echo (</em>&quot;book number <b>$id</b> - <b>$first</b> <b>$second</b> <b>$last</b>&quot;<em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=prim><b><i>Результат:</i></b></p>
<table border="0" summary="">
    <tr>
        <td colspan="2"><img src="images/gl3_2.gif" tppabs="http://site/bookphp/images/gl3_2.gif" border="0" width="399" height="90" alt=""></td>
    </tr>
    <tr><td width="20">&nbsp;</td>
        <td><p class=html>
            book number 1 - Thinking in PHP>
        </td>
    </tr>
</table>

<br><br>
<table border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="5" align="center"><img src="images/linebook1.gif" tppabs="http://site/bookphp/images/linebook1.gif" border="0" width="212" height="5" alt=""></td>
    </tr>
    <tr valign="middle" align="center">
        <td><img src="images/arrowleft.gif" tppabs="http://site/bookphp/images/arrowleft.gif" border="0" width="10" height="17" alt=""></td>
        <td><a class=a1 href="gl3_5.php.htm" tppabs="http://site/bookphp/gl3_5.php">Предыдущая</a></td>
        <td width="1" bgcolor="silver"></td>
        <td><a class=a1 href="gl3_7.php.htm" tppabs="http://site/bookphp/gl3_7.php">Следующая</a></td>
        <td><img src="images/arrowright.gif" tppabs="http://site/bookphp/images/arrowright.gif" border="0" width="10" height="17" alt=""></td>
    </tr>
    <tr>
        <td colspan="5" align="center"><img src="images/linebook2.gif" tppabs="http://site/bookphp/images/linebook2.gif" border="0" width="213" height="11" alt=""></td>
    </tr>
</table>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
            </p>
        </td>   
        <td width="7%">&nbsp;</td>  
    </tr>
</table>
<table border="0" width="100%">
    <tr>
        <td width=20%>&nbsp;</td>
        <td>
            <a class=a1 href="#up">Наверх</a>
        </td>
    </tr>
</table><br>
</body>
</html> 