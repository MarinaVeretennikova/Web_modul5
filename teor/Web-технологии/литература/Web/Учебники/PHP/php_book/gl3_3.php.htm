<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Строковые функции PHP. Поиск в тексте. substr, strpos, strrpos, strstr, strchr, stristr, strrchr, substr_count, strspn, strcspn</title>
<link rel="StyleSheet" type="text/css" href="book4.css" tppabs="http://site/bookphp/book4.css">
<link rel="StyleSheet" type="text/css" href="code.css" tppabs="http://site/bookphp/code.css">
</head>
<body bottommargin="0" marginheight="0" marginwidth="0" rightmargin="0" leftmargin="0" topmargin="0">
<table style="border-bottom-style: solid; border-width: 4px; border-color: #BABABA" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#D8F0FB">
    <tr valign="top">
        <td style="padding-left: 50" height="18" colspan="2">
            <a href="http://www.softtime.ru/" title="IT-студия SoftTime"><img src="images/softtime.gif" tppabs="http://site/bookphp/images/softtime.gif" border="0" width="137" height="18" vspace="10"></a>                    
        </td>
        <td valign="middle" align="right">  
            <a style="color: #607683; font-size: 11px; font-family: Arial, Helvetica, sans-serif;" href="mailto:softtime@softtime.ru">Написать письмо авторам</a>
        </td>
        <td width=10%>&nbsp;</td>
    </tr>
</table>
<table border="0" cellspacing="17" >
    <tr valign="bottom">
        <td width=7%>&nbsp;</td>
        <td width="30%" align="center"><h1 style="font-size: 36; padding-top: 20px;  margin: 0px">УЧЕБНИК&nbsp;PHP</h1></td>
        <td align="center"><img src="images/help.gif" tppabs="http://site/bookphp/images/help.gif" border="0" width="40" height="25" alt=""><br>
            <a class=a1 href="http://www.softtime.ru/bookphp/help.php"  title="Справочник функций языка PHP 4 на сайте IT-студии <SoftTime>"><b>справочник&nbsp;функций&nbsp;<Оnline></b></a>
        </td>
        <td align="center"><img src="images/aboutbook.gif" tppabs="http://site/bookphp/images/aboutbook.gif" border="0" width="25" height="25" alt=""><br>
            <a title="Об учебнике и его авторах" class=a1 href="aboutbook.php.htm" tppabs="http://site/bookphp/aboutbook.php"><b>Об&nbsp;учебнике</b></a>
        </td>
        <td align="center"><img src="images/updatebook.gif" tppabs="http://site/bookphp/images/updatebook.gif" border="0" width="40" height="25" alt=""><br>
            <a target="_blank" title="Проверить обновления учебника" class=a1 href="http://www.softtime.ru/info/bookphp.php"><b>Обновление</b></a>
        </td>       
    </tr>
</table><br>
<a name="up"></a>
<table border="0" cellspacing="0" cellpadding="0">
    <tr valign="top">
        <td width="25%">
            <table border="0" width="100%">
                <tr>
                    <td style="background-image: url(images/linebook1.gif); background-repeat: no-repeat"  height="5" width="213"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
                </tr>
                <tr align="left">
                    <td><p style="color: #1020E3; font-size: 16px; margin-left: 10"><b>Оглавление</b></p></td>
                </tr>
                <tr>
                    <td style="background-image: url(images/linebook2.gif); background-repeat: no-repeat" height="7"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
                </tr>
                <tr>
                    <td width="213">
                        <ol>
                            <li><a class=bookmenu href="gl1_1.php.htm" tppabs="http://site/bookphp/gl1_1.php">Основы PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl2_1.php.htm" tppabs="http://site/bookphp/gl2_1.php">Операторы языка PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl3_1.php.htm" tppabs="http://site/bookphp/gl3_1.php">Строковые функции</a></li>
                                                            <div id="activechapter">                                                        
                                    <p class=subchapter><a class=bookmenu href="gl3_1.php.htm" tppabs="http://site/bookphp/gl3_1.php"><nobr>Строковые функции</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_2.php.htm" tppabs="http://site/bookphp/gl3_2.php"><nobr>Htmlspecialchars</nobr></a></b></p>
                                    <p class=subchapter><b><a class=bookmenu href="gl3_3.php.htm" tppabs="http://site/bookphp/gl3_3.php"><nobr>Поиск в тексте</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_4.php.htm" tppabs="http://site/bookphp/gl3_4.php"><nobr>Функции strlen(), chr() и ord()</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_5.php.htm" tppabs="http://site/bookphp/gl3_5.php"><nobr>Trim-функции</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_6.php.htm" tppabs="http://site/bookphp/gl3_6.php"><nobr>Форматный вывод</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_7.php.htm" tppabs="http://site/bookphp/gl3_7.php"><nobr>Преобразование кодировки</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_8.php.htm" tppabs="http://site/bookphp/gl3_8.php"><nobr>Работа с бинарными данными</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_9.php.htm" tppabs="http://site/bookphp/gl3_9.php"><nobr>Работа с блоками текста</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_10.php.htm" tppabs="http://site/bookphp/gl3_10.php"><nobr>Объединение/ разделение строк</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_11.php.htm" tppabs="http://site/bookphp/gl3_11.php"><nobr>Сравнение строк</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_12.php.htm" tppabs="http://site/bookphp/gl3_12.php"><nobr>Работа с URL</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_13.php.htm" tppabs="http://site/bookphp/gl3_13.php"><nobr>Преобразование регистра</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_14.php.htm" tppabs="http://site/bookphp/gl3_14.php"><nobr>Заключение</nobr></a></b></p>
                                    
                            <li><a class=bookmenu href="gl4_1.php.htm" tppabs="http://site/bookphp/gl4_1.php">Массивы</a>
                                
                            </li>                                                           
                            <li><a class=bookmenu href="gl5_1.php.htm" tppabs="http://site/bookphp/gl5_1.php">Функции</a>
                                                        </li>
                            <li><a class=bookmenu href="gl6_1.php.htm" tppabs="http://site/bookphp/gl6_1.php">Работа с файлами</a>
                                                        </li>
                            <li ><a class=bookmenu href="gl7_1.php.htm" tppabs="http://site/bookphp/gl7_1.php">Регулярные выражения</a>
                                                        </li>
                            <li ><a class=bookmenu href="gl8_1.php.htm" tppabs="http://site/bookphp/gl8_1.php">Сессии и cookies в PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl9_1.php.htm" tppabs="http://site/bookphp/gl9_1.php">Работа с FTP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl10_1.php.htm" tppabs="http://site/bookphp/gl10_1.php">Проверка данных</a>
                                                        </li>
                            <li><a class=bookmenu href="gl11_1.php.htm" tppabs="http://site/bookphp/gl11_1.php">Гостевая книга</a>
                                                        </li>
                            <li class="newchaptr"><a class=bookmenu href="gl12_1.php.htm" tppabs="http://site/bookphp/gl12_1.php">PHP и MySQL</a>
                                                        </li>
                            
                        </ol>
                        <p><i>Продолжение следует</i></p>
                    </td>
                </tr>
            </table>
        </td>
        <td ><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<br><br>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<table border="0" cellpadding="0" cellspacing="0" height="70">
    <tr>
        <td rowspan="3" width="70"><img src="images/book.gif" tppabs="http://site/bookphp/images/book.gif" border="0" width="59" height="44" alt=""></td>
        <td height="50" valign="middle"><h1 class=namepage>Строковые функции PHP</h1></td>
    </tr>
    <tr>
        <td height="7px" bgcolor="#9FB6C9"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
    </tr>
    <tr><td height="13"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td></tr>
</table><table border="0" align="right" cellpadding="0" cellspacing="7">
    <tr valign="middle" align="center">
        <td><img src="images/arrowleft.gif" tppabs="http://site/bookphp/images/arrowleft.gif" border="0" width="10" height="17" alt=""></td>
        <td><a class=a1 href="gl3_2.php.htm" tppabs="http://site/bookphp/gl3_2.php">Предыдущая</a></td>
        <td width="1" bgcolor="silver"></td>
        <td><a class=a1 href="gl3_4.php.htm" tppabs="http://site/bookphp/gl3_4.php">Следующая</a></td>
        <td><img src="images/arrowright.gif" tppabs="http://site/bookphp/images/arrowright.gif" border="0" width="10" height="17" alt=""></td>
    </tr>
    <td colspan="5" bgcolor="silver"></td>
</table>

<h1 class=p1>Функции поиска в тексте</h1>
<table border="0" cellspacing="10">
    <tr valign="top">
        <td>
            <a class=bluelink href="#1" title="Функция возвращает часть строки">substr()</a>&nbsp;<br>
            <a class=bluelink href="#2" title="Функция возвращает позицию в строке, в которой начинается искомая подстрока ">strpos()</a>&nbsp;<br>
            <a class=bluelink href="#3" title="Функция ищет в строке последнюю позицию, где встречается искомый символ">strrpos()</a>&nbsp;<br>
        </td>
        <td>
            <a class=bluelink href="#4" title="Функция возвращает участок строки, начиная с первого фрагмента, указанного в параметре и до конца строки">strstr()</a>&nbsp;<br>     
            <a class=bluelink href="#5" title="Аналог функции strstr()">strchr()</a>&nbsp;<br>
            <a class=bluelink href="#6" title="Аналог функции strstr(), нечувствительна к регистру">stristr()</a>&nbsp;<br>
        </td>
        <td>
            <a class=bluelink href="#7" title="Функция поиска последнего вхождения подстроки">strrchr()</a>&nbsp;<br>       
            <a class=bluelink href="#8" title="Функция подсчета количество вхождений фрагмента в строку">substr_count()</a>&nbsp;<br>
            <a class=bluelink href="#9" title="Функция определения присутствия начальных символов в строке">strspn()</a>&nbsp;<br>
        </td>
        <td>
            <a class=bluelink href="#10" title="Функция определения отсутствия начальных символов в строке">strcspn()</a>&nbsp;<br>     
        </td>
    </tr>
</table>
<br>

<a name=1></a><h1 class=p1><b>substr()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
string <b>substr</b><em class=gr>(</em>string <b>string</b>, int <b>start</b>[, int <b>length</b>]<em class=gr>)</em>
</pre></blockquote>
<p class=text>Эта функция возвращает часть строки. Первый аргумент – исходная строка; второй – положение в строке, которую надо вернуть, первого символа (отсчет начинается с нуля); третий – длина строки в символах, которую надо вернуть. Если третий аргумент не указан, то возвращается вся оставшаяся часть строки.</p>
<p class=prim><i>Пример:</i></p>

<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$string</b> = <b>substr</b>("Hello, world!", 6, 2);
   <em class=gr>echo (</em></em><em class=gr>)</em>; 
<em class=red>?&gt;</em>
</pre></blockquote>

<p class=text>Результат выполнения – символ &quot;<b>w</b>&quot;. Если же третий параметр не указывать, т.е. написать<br>
<b>$string</b> = <b>substr</b>("Hello, world!", 6);<br>
<p class=text>то возвратиться подстрока &quot;world!&quot;.</p>

<br>
<a name=2></a><h1 class=p1><b>strpos()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
string <b>strpos</b>(string <b>haystack</b>, string <b>needle</b>[, int <b>offset</b>])
</pre></blockquote>
<p class=text>Эта функция обеспечивает действие, обратное функции <b>substr</b>. Т.е. она возвращает позицию в строке <b>haystack</b>, в которой найдена переданная ей подстрока <b>needle</b>. Т.е. следующий скрипт</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$string</b> <em class=gr>=</em> strpos<em class=gr>(</em>"Hello, world!", "world"<em class=gr>)</em>;
   <em class=gr>echo(</em><b>$string</b><em class=gr>)</em>; 
<em class=red>?&gt;</em>
</pre></blockquote>

<p class=text>вернет нам число 7.</p>
<p class=text>Необязательный параметр <b>offset</b> позволяет указать в строке позицию, с которой надо начинать поиск:</p>

<br>
<a name=3></a><h1 class=p1><b>strrpos()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
string <b>strrpos</b><em class=gr>(</em>string <b>haystack</b>, string <b>needle</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Эта функция ищет в строке <b>haystack</b> последнюю позицию, где встречается символ <b>needle</b>.</p>

<br>
<a name=4></a><h1 class=p1><b>strstr()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
string <b>strstr</b><em class=gr>(</em>string <b>haystack</b>, string <b>needle</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Функция <b>strstr()</b> возвращает участок строки, заданной в параметре <b>haystack</b>, начиная с первого фрагмента, указанного в параметре <b>needle</b> и до конца строки. В случае неудачи функция возвращает <b>false</b>.
<p class=prim><i>Пример:</i></p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$url</b> <em class=gr>=</em> "http://www.softtime.ru";
   <b>$www</b> <em class=gr>=</em> <b>strstr</b>(<b>$url</b>,"w");
   <em class=gr>echo (</em><b>$www</b><em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>Результат: www.softtime.ru</p>
<p class=text>Эта функция чувствительна к регистру. Заметим также, что в случае, если <b>needle</b> не является строкой, то значение преобразуется в целое и используется как код искомого символа.</p>

<br>
<a name=5></a><h1 class=p1><b>strchr()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
string <b>strchr</b><em class=gr>(</em>string <b>haystack</b>, string <b>needle</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Данная функция работает абсолютно идентично функции <b>strstr()</b>:</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$url</b> <em class=gr>=</em> "http://www.softtime.ru";
   <b>$www</b> <em class=gr>=</em> <b>strstr</b>(<b>$url</b>,"w");
   <em class=gr>echo (</em><b>$www</b><em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>Результат: www.softtime.ru</p>

<br>
<a name=6></a><h1 class=p1><b>stristr()</b></h1>
<p class=prim><i><b>Синтаксис:</b></i></p>
<blockquote><pre>
string <b>stristr</b><em class=gr>(</em>string <b>haystack</b>, string <b>needle</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Эта функция работает абсолютно аналогично функции <b>strstr</b>(), только является нечувствительной к регистру.</p>

<br>
<a name=7></a><h1 class=p1><b>strrchr()</b></h1>
<p class=prim><i><b>Синтаксис:</b></i></p>
<blockquote><pre>
string <b>strrchr</b><em class=gr>(</em>string <b>haystack</b>, string <b>needle</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>А эта функция отличается от аналогичных ей тем, что осуществляет поиск последнего вхождения подстроки. Т.е. функция <b>strrchr</b>() возвращает участок строки, заданной в параметре <b>haystack</b>, начиная с последнего фрагмента, указанного в параметре <b>needle</b> и до конца строки. В случае неудачи возвращает <b>false</b>.</p>
<p class=text>Чувствительна к регистру. В случае, если <b>needle</b> не является строкой, то значение преобразуется в целое и используется как код искомого символа.</p>
<p class=text>Даже не знаю, что придумать в качестве примера на эту функцию. Ну давайте посмотрим, какая у нас директория (у меня, естественно) прописана последней в переменной окружения $<b>PATH:</b></p>
<blockquote><pre>
&lt;<b>p</b>>
   &lt;<b>font</b> color=red> Это все, что у меня есть :)&lt;/<b>font</b>>
&lt;/<b>p</b>>
<em class=red>&lt;?</em>
   <em class=gr>echo (</em><b>$PATH</b><em class=gr>)</em>;
<em class=red>?&gt;</em>
&lt;<b>p</b>>
   &lt;<b>font</b> color=red> А это – из последнего:&lt;/<b>font</b>>
&lt;/<b>p</b>>
<em class=red>&lt;?</em>
   <b>$dir</b> = <b>substr</b><em class=gr>(</em><b>strrchr</b>(<b>$PATH</b>, ";"), 1<em class=gr>)</em>;
   <em class=gr>echo (</em><b>$dir</b><em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>И вот что мы видим в результате:</p>

<br>
<a name=8></a><h1 class=p1><b>substr_count()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
int <b>substr_count</b><em class=gr>(</em>string <b>haystack</b>, string <b>needle</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Функция <b>substr_count</b>() находит количество вхождений фрагмента в строку. Она возвращает число фрагментов <b>needle</b>, присутствующих в строке <b>haystack</b>.</p>
<p class=prim><i>Пример:</i></p>

<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$str</b> <em class=gr>=</em> "dfhd@ffs@dfskfk@asas";
   <b>$substr_count</b> = <b>substr_count</b><em class=gr>(</em>$str,"@"<em class=gr>)</em>;
   <em class=gr>echo (</em><b>$substr_count</b><em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>Результат: 3.</p>

<br>
<a name=9></a><h1 class=p1><b>strspn()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
int <b>strspn</b><em class=gr>(</em>string <b>str1</b>, string <b>str2</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Функция <b>strspn</b>() определяет присутствие начальных символов в строке. Она возвращает длину начального фрагмента строки <b>str1</b>, состоящего полностью из символов, которые есть в строке <b>str2</b>.</p>
<p class=prim><i>Пример:</i></p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$str</b> <em class=gr>=</em> "dfhd@ffs@dfskfk@asas";
   <b>$substr_count</b> <em class=gr>=</em> <b>strspn</b><em class=gr>(</em><b>$str</b>,"df"<em class=gr>)</em>;
   <em class=gr>echo (</em><b>$substr_count</b><em class=gr>)</em>;
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>Результат: 2.</p>

<br>
<a name=10></a><h1 class=p1><b>strcspn()</b></h1>
<p class=prim><i>Синтаксис:</i></p>
<blockquote><pre>
int <b>strcspn</b><em class=gr>(</em>string <b>str1</b>, string <b>str2</b><em class=gr>)</em>
</pre></blockquote>

<p class=text>Обратная функции <b>strspn</b>() функция <b>strcspn</b>() Определяет отсутствие начальных символов в строке.</p>
<p class=text>Функция <b>strcspn</b>() возвращает длину начального фрагмента строки <b>str1</b>, состоящего полностью не из символов, которые есть в строке <b>str2</b>.</p>

<table border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="5" align="center"><img src="images/linebook1.gif" tppabs="http://site/bookphp/images/linebook1.gif" border="0" width="212" height="5" alt=""></td>
    </tr>
    <tr valign="middle" align="center">
        <td><img src="images/arrowleft.gif" tppabs="http://site/bookphp/images/arrowleft.gif" border="0" width="10" height="17" alt=""></td>
        <td><a class=a1 href="gl3_2.php.htm" tppabs="http://site/bookphp/gl3_2.php">Предыдущая</a></td>
        <td width="1" bgcolor="silver"></td>
        <td><a class=a1 href="gl3_4.php.htm" tppabs="http://site/bookphp/gl3_4.php">Следующая</a></td>
        <td><img src="images/arrowright.gif" tppabs="http://site/bookphp/images/arrowright.gif" border="0" width="10" height="17" alt=""></td>
    </tr>
    <tr>
        <td colspan="5" align="center"><img src="images/linebook2.gif" tppabs="http://site/bookphp/images/linebook2.gif" border="0" width="213" height="11" alt=""></td>
    </tr>
</table>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
            </p>
        </td>   
        <td width="7%">&nbsp;</td>  
    </tr>
</table>
<table border="0" width="100%">
    <tr>
        <td width=20%>&nbsp;</td>
        <td>
            <a class=a1 href="#up">Наверх</a>
        </td>
    </tr>
</table><br>
</body>
</html> 