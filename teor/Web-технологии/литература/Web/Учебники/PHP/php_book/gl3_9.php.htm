<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Функции работы с текстом. Строковые функции PHP.</title>
<link rel="StyleSheet" type="text/css" href="book4.css" tppabs="http://site/bookphp/book4.css">
<link rel="StyleSheet" type="text/css" href="code.css" tppabs="http://site/bookphp/code.css">
</head>
<body bottommargin="0" marginheight="0" marginwidth="0" rightmargin="0" leftmargin="0" topmargin="0">
<table style="border-bottom-style: solid; border-width: 4px; border-color: #BABABA" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#D8F0FB">
    <tr valign="top">
        <td style="padding-left: 50" height="18" colspan="2">
            <a href="http://www.softtime.ru/" title="IT-студия SoftTime"><img src="images/softtime.gif" tppabs="http://site/bookphp/images/softtime.gif" border="0" width="137" height="18" vspace="10"></a>                    
        </td>
        <td valign="middle" align="right">  
            <a style="color: #607683; font-size: 11px; font-family: Arial, Helvetica, sans-serif;" href="mailto:softtime@softtime.ru">Написать письмо авторам</a>
        </td>
        <td width=10%>&nbsp;</td>
    </tr>
</table>
<table border="0" cellspacing="17" >
    <tr valign="bottom">
        <td width=7%>&nbsp;</td>
        <td width="30%" align="center"><h1 style="font-size: 36; padding-top: 20px;  margin: 0px">УЧЕБНИК&nbsp;PHP</h1></td>
        <td align="center"><img src="images/help.gif" tppabs="http://site/bookphp/images/help.gif" border="0" width="40" height="25" alt=""><br>
            <a class=a1 href="http://www.softtime.ru/bookphp/help.php"  title="Справочник функций языка PHP 4 на сайте IT-студии <SoftTime>"><b>справочник&nbsp;функций&nbsp;<Оnline></b></a>
        </td>
        <td align="center"><img src="images/aboutbook.gif" tppabs="http://site/bookphp/images/aboutbook.gif" border="0" width="25" height="25" alt=""><br>
            <a title="Об учебнике и его авторах" class=a1 href="aboutbook.php.htm" tppabs="http://site/bookphp/aboutbook.php"><b>Об&nbsp;учебнике</b></a>
        </td>
        <td align="center"><img src="images/updatebook.gif" tppabs="http://site/bookphp/images/updatebook.gif" border="0" width="40" height="25" alt=""><br>
            <a target="_blank" title="Проверить обновления учебника" class=a1 href="http://www.softtime.ru/info/bookphp.php"><b>Обновление</b></a>
        </td>       
    </tr>
</table><br>
<a name="up"></a>
<table border="0" cellspacing="0" cellpadding="0">
    <tr valign="top">
        <td width="25%">
            <table border="0" width="100%">
                <tr>
                    <td style="background-image: url(images/linebook1.gif); background-repeat: no-repeat"  height="5" width="213"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
                </tr>
                <tr align="left">
                    <td><p style="color: #1020E3; font-size: 16px; margin-left: 10"><b>Оглавление</b></p></td>
                </tr>
                <tr>
                    <td style="background-image: url(images/linebook2.gif); background-repeat: no-repeat" height="7"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
                </tr>
                <tr>
                    <td width="213">
                        <ol>
                            <li><a class=bookmenu href="gl1_1.php.htm" tppabs="http://site/bookphp/gl1_1.php">Основы PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl2_1.php.htm" tppabs="http://site/bookphp/gl2_1.php">Операторы языка PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl3_1.php.htm" tppabs="http://site/bookphp/gl3_1.php">Строковые функции</a></li>
                                                            <div id="activechapter">                                                        
                                    <p class=subchapter><a class=bookmenu href="gl3_1.php.htm" tppabs="http://site/bookphp/gl3_1.php"><nobr>Строковые функции</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_2.php.htm" tppabs="http://site/bookphp/gl3_2.php"><nobr>Htmlspecialchars</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_3.php.htm" tppabs="http://site/bookphp/gl3_3.php"><nobr>Поиск в тексте</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_4.php.htm" tppabs="http://site/bookphp/gl3_4.php"><nobr>Функции strlen(), chr() и ord()</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_5.php.htm" tppabs="http://site/bookphp/gl3_5.php"><nobr>Trim-функции</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_6.php.htm" tppabs="http://site/bookphp/gl3_6.php"><nobr>Форматный вывод</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_7.php.htm" tppabs="http://site/bookphp/gl3_7.php"><nobr>Преобразование кодировки</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_8.php.htm" tppabs="http://site/bookphp/gl3_8.php"><nobr>Работа с бинарными данными</nobr></a></b></p>
                                    <p class=subchapter><b><a class=bookmenu href="gl3_9.php.htm" tppabs="http://site/bookphp/gl3_9.php"><nobr>Работа с блоками текста</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_10.php.htm" tppabs="http://site/bookphp/gl3_10.php"><nobr>Объединение/ разделение строк</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_11.php.htm" tppabs="http://site/bookphp/gl3_11.php"><nobr>Сравнение строк</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_12.php.htm" tppabs="http://site/bookphp/gl3_12.php"><nobr>Работа с URL</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_13.php.htm" tppabs="http://site/bookphp/gl3_13.php"><nobr>Преобразование регистра</nobr></a></b></p>
                                    <p class=subchapter><a class=bookmenu href="gl3_14.php.htm" tppabs="http://site/bookphp/gl3_14.php"><nobr>Заключение</nobr></a></b></p>
                                    
                            <li><a class=bookmenu href="gl4_1.php.htm" tppabs="http://site/bookphp/gl4_1.php">Массивы</a>
                                
                            </li>                                                           
                            <li><a class=bookmenu href="gl5_1.php.htm" tppabs="http://site/bookphp/gl5_1.php">Функции</a>
                                                        </li>
                            <li><a class=bookmenu href="gl6_1.php.htm" tppabs="http://site/bookphp/gl6_1.php">Работа с файлами</a>
                                                        </li>
                            <li ><a class=bookmenu href="gl7_1.php.htm" tppabs="http://site/bookphp/gl7_1.php">Регулярные выражения</a>
                                                        </li>
                            <li ><a class=bookmenu href="gl8_1.php.htm" tppabs="http://site/bookphp/gl8_1.php">Сессии и cookies в PHP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl9_1.php.htm" tppabs="http://site/bookphp/gl9_1.php">Работа с FTP</a>
                                                        </li>
                            <li><a class=bookmenu href="gl10_1.php.htm" tppabs="http://site/bookphp/gl10_1.php">Проверка данных</a>
                                                        </li>
                            <li><a class=bookmenu href="gl11_1.php.htm" tppabs="http://site/bookphp/gl11_1.php">Гостевая книга</a>
                                                        </li>
                            <li class="newchaptr"><a class=bookmenu href="gl12_1.php.htm" tppabs="http://site/bookphp/gl12_1.php">PHP и MySQL</a>
                                                        </li>
                            
                        </ol>
                        <p><i>Продолжение следует</i></p>
                    </td>
                </tr>
            </table>
        </td>
        <td ><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<br><br>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<table border="0" cellpadding="0" cellspacing="0" height="70">
    <tr>
        <td rowspan="3" width="70"><img src="images/book.gif" tppabs="http://site/bookphp/images/book.gif" border="0" width="59" height="44" alt=""></td>
        <td height="50" valign="middle"><h1 class=namepage>Строковые функции PHP</h1></td>
    </tr>
    <tr>
        <td height="7px" bgcolor="#9FB6C9"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td>
    </tr>
    <tr><td height="13"><img src="images/pic.gif" tppabs="http://site/bookphp/images/pic.gif" border="0" width="1" height="1" alt=""></td></tr>
</table><table border="0" align="right" cellpadding="0" cellspacing="7">
    <tr valign="middle" align="center">
        <td><img src="images/arrowleft.gif" tppabs="http://site/bookphp/images/arrowleft.gif" border="0" width="10" height="17" alt=""></td>
        <td><a class=a1 href="gl3_8.php.htm" tppabs="http://site/bookphp/gl3_8.php">Предыдущая</a></td>
        <td width="1" bgcolor="silver"></td>
        <td><a class=a1 href="gl3_10.php.htm" tppabs="http://site/bookphp/gl3_10.php">Следующая</a></td>
        <td><img src="images/arrowright.gif" tppabs="http://site/bookphp/images/arrowright.gif" border="0" width="10" height="17" alt=""></td>
    </tr>
    <td colspan="5" bgcolor="silver"></td>
</table>
<h1 class=p1>Функции работы с блоками текста</h1>
<br>
<table border="0" cellspacing="10">
    <tr valign="top">
        <td>
            <a class=bluelink href="#1" title="Функция разбиения исходного текста на строки с определенными завершающими символами">wordwrap()</a>&nbsp;<br>
            <a class=bluelink href="#2" title="Функция замены подстроки в исходной строке">str_replace()</a>&nbsp;<br>
            <a class=bluelink href="#3" title="Функция замены подстрок в исходной строке">substr_replace()</a>&nbsp;<br>
        </td>
        <td>
            <a class=bluelink href="#4" title="Функция комплексной замены в строке">strtr()</a>&nbsp;<br>       
            <a class=bluelink href="#5" title="Функция удаления обратных слешей">stripslashes()</a>&nbsp;<br>
            <a class=bluelink href="#6" title="Функция преобразования спецсимволов в их двоичное представление">stripcslashes()</a>&nbsp;<br>
        </td>
        <td>
            <a class=bluelink href="#7" title='Функция добавления слешей перед символами строки "," и \'>addslashes()</a>&nbsp;<br>     
            <a class=bluelink href="#8" title="Функция добавление слешей перед специальными символами строки">addcslashes()</a>&nbsp;<br>
            <a class=bluelink href="#9" title="Функция цитирования метасимволов">quotemeta()</a>&nbsp;<br>
        </td>
        <td>
            <a class=bluelink href="#10" title="Функция реверса строки">strrev()</a>&nbsp;<br>          
        </td>
    </tr>
</table>
<br>
<a name=1></a>
<h1 class=p1>wordwrap()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>wordwrap</b><em class=gr>(</em>string <b>str</b> [, int <b>width</b> [, string <b>break</b> [, int <b>cut</b>]]]<em class=gr>)</em>
</pre></blockquote>
<p class=text>Функция <b>wordwrap()</b> разбивает исходный текст на строки с определенными завершающими символами. Согласно синтаксису, эта функция разбивает блок текста <b>str</b> на несколько строк, которые завершаеются символами <b>break</b>, так, чтобы в одной строке было не более <b>width</b> букв. Поскольку разбиение происходит по границам слов, текст остается вполне читаемым.
<p class=prim><b><i>К примеру:</i></b></p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$str</b><em class=gr> = </em>"Вставай, страна огромная"<em class=gr>;</em>
   <b>$mod_str</b><em class=gr> = </em><b>wordwrap</b><em class=gr>(</em><b>$str</b>,5,"\t"<em class=gr>);</em>
   <em class=gr>echo(</em><b>$mod_str</b><em class=gr>);</em>
<em class=red>?&gt;</em>
</pre></blockquote>
<br><br>
<a name=2></a>
<h1 class=p1>str_replace()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>str_replace</b><em class=gr>(</em>string <b>from</b>, string <b>to</b>, string <b>str</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Функция <b>str_replace()</b> заменяет в исходной строке str одни подстроки на другие. Т.е. функция заменяет в строке <b>str</b> все вхождения подстроки <b>from</b> на <b>to</b> и возвращает результат. Эта функция может работать с двоичными строками.</p>
<p class=text>Функция, вообще говоря, нужная. К примеру, если Вы пишите что-то типа гостевой книги, форума, и хотите, чтобы в форме ввода для выделения теста можно было пользоваться стандарными тегами HTML, Вы можете с помощью этой функции заменить символы, которые Вы выбрали для форматирования на стандартные теги  НТML. К примеру:</p>
<blockquote><pre>
   <b>$txt</b><em class=gr> = </em><b>str_replace</b><em class=gr>(</em>"[B]","&lt;B>",<b>$txt</b><em class=gr>);</em>
</pre></blockquote>     
<p class=text>Т.е. если Вы используете для отображения текста полужирным шрифтом символы "[B]", Вы должны их заменить на символ "&lt;B>", используемые в НТМL.</p>
<p class=text>Позже, при написании реального проекта, мы обязательно будем использовать как эту, так и многие другие, рассмотренные нами функции.</p>

<br><br>
<a name=3></a>
<h1 class=p1>substr_replace()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>substr_replace</b><em class=gr>(</em>string <b>str</b>, string <b>replacement</b>, int <b>start</b> [, int <b>length</b>]<em class=gr>)</em>
</pre></blockquote>
<p class=text>Эта функция заменяет в исходной строке одни подстроки на другие. Она возвращает строку <b>str</b>, в которой часть от символа с позицией <b>start</b> и длиной <b>length</b>  заменяется строкой <b>replacement</b>. Если аргумент длины <b>length</b> не указан, замена проводится до конца.</p>
<p class=text>Если значение аргумента <b>start</b> положительно, то отсчет производится от начала строки <b>str</b>, в противном случае - от конца. В случае неотрицательного значения <b>length</b>, оно указывает длину заменяемого фрагмента. Если же оно отрицательно, то это - число символов от конца строки <b>str</b> до последнего символа заменяемого фрагмента.</p>

<br><br>
<a name=4></a>
<h1 class=p1>strtr()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>strtr</b><em class=gr>(</em>string <b>str</b>, string <b>from</b>, string <b>to</b><em class=gr>)</em><br>
string <b>strtr</b><em class=gr>(</em>string <b>str</b>, array <b>from</b><em class=gr>)</em>
</pre></blockquote>
<p class=text>Эта функция предназначена для комплексной замены в строке и имеет два вида синтаксиса. В первом случае функция <b>strtr()</b> возвращает строку <b>str</b>, в которой каждый символ, присутствующий в строке <b>from</b>, заменяется на символ из строки <b>to</b>. Если строки <b>from</b> и <b>to</b> различной длины, то лишние конечные символы у той строки, которая длинее, игнорируются. Во втором случае функция <b>strtr()</b> возвращает строку, в которой фрагменты строки <b>str</b> заменяются на фрагменты, соответствующие индексам значений элементов массива <b>from</b>. Сначала функция пытается заменить наибольшие фрагменты исходной строки, при этом не выполняя замену в уже модифицированных частях строки. Таким образом, можно выполнить несколько замен сразу:</p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$str</b><em class=gr> = </em><b>array</b><em class=gr>(</em>"<name1>" <em class=gr>=></em> "M.Kuznetsov",
             "&lt;name2>" <em class=gr>=></em> "I.Simdyanov"<em class=gr>);</em>
   <b>$str_out</b> = "Авторы этого учебника <name1> и <name2> приветствуют вас!";
   <em class=gr>echo</em> <b>strtr</b><em class=gr>(</em><b>$str_out</b>,<b>$str</b><em class=gr>);</em>
<em class=red>?&gt;</em>
</pre></blockquote>

<p class=text>А вот как можно при помощи этой функции отменить действие функции <b>htmlspecialchars()</b>: </p>
<blockquote><pre>
<em class=red>&lt;?</em>
   <b>$var</b> <em class=gr>=</em> <b>array_flip</b><em class=gr>(</em><b>get_html_translation_table</b>()<em class=gr>);</em>
   <b>$str</b> <em class=gr>=</em> <b>strtr</b><em class=gr>(</em><b>$str</b>, <b>$var</b><em class=gr>);</em>
<em class=red>?&gt;</em>
</pre></blockquote>
<p class=text>Т.е., из строки, в которой все спецсимволы заменены на их HTML-эквиваленты, мы получаме исходную строку.</p>

<br><br>
<a name=5></a>
<h1 class=p1>stripslashes()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>stripslashes</b><em class=gr>(</em>string <b>str</b><em class=gr>)</em><br>
</pre></blockquote>
<p class=text>Функция удаления обратных слешей. Т.е. производится замена в строке <b>str</b> предваренных слешем символов на их кодовые эквиваленты. Функция работает с символами: ", ", \. </p>

<br><br>
<a name=6></a>
<h1 class=p1>stripcslashes()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>stripcslashes</b><em class=gr>(</em>string <b>str</b><em class=gr>)</em><br>
</pre></blockquote>
<p class=text>А эта функция преобразует спецсимволы в их двоичное представление.</p>
<p class=text>Она возвращает строку, в которой закомментированные обратным слешем спецсимволы, (с целью визуального отображения), преобразуются в их двоичное представление. Функция распознает C-подобные записи (восьмеричные и шестнадцатеричные последовательности <b>\n</b>, <b>\r</b> и т.д.).</p>

<br><br>
<a name=7></a>
<h1 class=p1>addslashes()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>addslashes</b><em class=gr>(</em>string <b>str</b><em class=gr>)</em><br>
</pre></blockquote>
<p class=text>Функция добавления слешей перед символами строки "," и \. Эту функцию удобно использовать при вызове функции <b>eval()</b>.</p>

<br><br>
<a name=8></a>
<h1 class=p1>addcslashes()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>addcslashes</b><em class=gr>(</em>string <b>str</b>, string <b>charlist</b><em class=gr>)</em><br>
</pre></blockquote>
<p class=text>Функция добавление слешей перед специальными символами строки.</p>
<p class=text>Возвращает строку <b>str</b>, в которую вставлены символы обратного слеша перед перечисленными в списке <b>charlist</b> символами. Это позволяет преобразовывать символы, которые не печатаются в их визуальное С-представление.</p>

<br><br>
<a name=9></a>
<h1 class=p1>quotemeta()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>quotemeta</b><em class=gr>(</em>string <b>str</b><em class=gr>)</em><br>
</pre></blockquote>
<p class=text>Функция цитирования метасимволов. Возвращает строку, в которую добавлены обратные слеши  перед каждым из следующих символов: . \\ + * ? [ ^ ] ( $ ).  Функцию можно использовать для подготовки шаблонов в регулярных выражениях.</p>

<br><br>
<a name=10></a>
<h1 class=p1>strrev()</h1>
<p class=prim><b><i>Синтаксис:</i></b></p>
<blockquote><pre>
string <b>strrev</b><em class=gr>(</em>string <b>str</b><em class=gr>)</em><br>
</pre></blockquote>
<p class=text>Функция производит реверс строки.</p>
<br><br>
<table border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="5" align="center"><img src="images/linebook1.gif" tppabs="http://site/bookphp/images/linebook1.gif" border="0" width="212" height="5" alt=""></td>
    </tr>
    <tr valign="middle" align="center">
        <td><img src="images/arrowleft.gif" tppabs="http://site/bookphp/images/arrowleft.gif" border="0" width="10" height="17" alt=""></td>
        <td><a class=a1 href="gl3_8.php.htm" tppabs="http://site/bookphp/gl3_8.php">Предыдущая</a></td>
        <td width="1" bgcolor="silver"></td>
        <td><a class=a1 href="gl3_10.php.htm" tppabs="http://site/bookphp/gl3_10.php">Следующая</a></td>
        <td><img src="images/arrowright.gif" tppabs="http://site/bookphp/images/arrowright.gif" border="0" width="10" height="17" alt=""></td>
    </tr>
    <tr>
        <td colspan="5" align="center"><img src="images/linebook2.gif" tppabs="http://site/bookphp/images/linebook2.gif" border="0" width="213" height="11" alt=""></td>
    </tr>
</table>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
            </p>
        </td>   
        <td width="7%">&nbsp;</td>  
    </tr>
</table>
<table border="0" width="100%">
    <tr>
        <td width=20%>&nbsp;</td>
        <td>
            <a class=a1 href="#up">Наверх</a>
        </td>
    </tr>
</table><br>
</body>
</html> 