<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="Content-Language" content="ru"><meta http-equiv="Content-Type" content="text/html; charset=windows-1251"><TITLE>exif_read_data</TITLE>
<LINK REL="stylesheet" HREF="../style.css"></HEAD>
<BODY><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%"><TR><TD COLSPAN="3"><TABLE BGCOLOR="#CCCCFF" BORDER="0" WIDTH="100%"><TR><TD>
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="3"><TR><TH COLSPAN="3">Учебник РНР</TH></TR><TR>
<TD WIDTH="10%"><A HREF="exif-imagetype.html">Назад</A></TD><TD WIDTH="80%">
</TD><TD WIDTH="10%" ALIGN="right"><A HREF="exif-thumbnail.html">Вперёд</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="../imag/spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></TD></TR><TR><TD><IMG SRC="../imag/spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%">
<H1><A NAME="function.exif-read-data">exif_read_data</A></H1><A NAME="AEN30995"></A>
<P>(PHP 4 &#62;= 4.2.0)</P><p>exif_read_data - читает шапки EXIF из JPEG или TIFF.<A NAME="AEN31001"></A></p>
<H2>Описание</H2><p>array <B>exif_read_data</B> (string filename [, string sections [, bool arrays [, bool thumbnail]]])</p>
<P>Функция <B>exif_read_data()</B> читает шапки/headers
EXIF из файла изображения JPEG или TIFF. Она возвращает ассоциативный 
массив, где индексами являются header-имена, а значениями - значения, 
ассоциированные с этими headers. Если никакие данные не могут быть возвращены, 
возвращается <TT><B>FALSE</B></TT>.</P><P><TT><I>filename</I></TT> это имя читаемого файла. Это не может быть url.</P>
<P><TT><I>sections</I></TT> разделённый запятыми список разделов, который должен присутствовать в файле, 
чтобы производить результирующий массив.<A NAME="AEN31025"></A><TABLE BORDER="1"><TR><TD>FILE</TD>
<TD>FileName, FileSize, FileDateTime, SectionsFound</TD></TR><TR><TD>COMPUTED</TD>
<TD>html, Width, Height, IsColor и ещё что-нибудь, если доступно.</TD></TR><TR><TD>ANY_TAG</TD>
<TD>Любая информация, имеющая тэг, например, IFD0, EXIF, ...</TD></TR><TR><TD>IFD0</TD>
<TD>Все данные с тэгами IFD0. В нормальных файлах изображений содержит размер изображения и т.д.</TD></TR>
<TR><TD>THUMBNAIL</TD><TD>Файл, содержащий уменьшенную версию изображения/thumbnail, если имеется второй IFD.
Вся тэговая информация о внедрённом thumbnail хранится в этом разделе.</TD></TR><TR><TD>COMMENT</TD>
<TD>Шапки комментария JPEG-изображений.</TD></TR><TR><TD>EXIF</TD><TD>Раздел EXIF это подраздел IFD0. Он содержит более детализированную информацию 
об изображении. Большинство этих вхождений относятся к цифровой камере.</TD></TR></TABLE>
<P><TT><I>arrays</I></TT> специфицирует, становится или нет каждый раздел массивом. Разделы <I>FILE</I>,
<I>COMPUTED</I> и <I>THUMBNAIL</I> всегда становятся массивами, мак как они могут содержать значения, имена 
которых конфликтуют с другими разделами.</P><P><TT><I>thumbnail</I></TT> читать или нет само thumbnail, а не только тэгированные данные.</P>
<BLOCKQUOTE><P><B>Примечание: </B>делается попытка представить шапки еxif в JPEG/TIFF-изображениях, 
генерируемых цифровыми камерами, но, к сожалению, каждая цифровая камера по 
своему тэгирует свои изображения, поэтому вы не всегда можете полагаться на 
специфические шапки Exif.</P></BLOCKQUOTE><TABLE WIDTH="100%" BORDER="0"><TR><TD><A NAME="AEN31059"></A>
<h5>Пример 1. exif_read_data()</h5><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD>
<PRE>&#60;?php
echo "test1.jpg:&#60;br&#62;\n";
$exif = exif_read_data ('tests/test1.jpg','IFD0');
echo $exif===false ? "No header data found.&#60;br&#62;\n" : "Image contains headers&#60;br&#62;";
$exif = exif_read_data ('tests/test2.jpg',0,true);
echo "test2.jpg:&#60;br&#62;\n";
foreach($exif as $key=&#62;$section) {
foreach($section as $name=&#62;$val) {
   echo "$key.$name: $val&#60;br&#62;\n";
}
}?&#62;</PRE></TD></TR></TABLE><P> Первый вызов терпит неудачу, поскольку изображение не имеет header-информации.
<TABLE BORDER="0"  BGCOLOR="#E0E0E0"CELLPADDING="5"><TR><TD><PRE>test1.jpg:
No header data found.
test2.jpg:
FILE.FileName: test2.jpg
FILE.FileDateTime: 1017666176
FILE.FileSize: 1240
FILE.FileType: 2
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, COMMENT
COMPUTED.html: width="1" height="1"
COMPUTED.Height: 1
COMPUTED.Width: 1
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
COMPUTED.UserComment: Exif test image.
COMPUTED.UserCommentEncoding: ASCII
COMPUTED.Copyright: Photo (c) M.Boerger, Edited by M.Boerger.
COMPUTED.Copyright.Photographer: Photo (c) M.Boerger
COMPUTED.Copyright.Editor: Edited by M.Boerger.
IFD0.Copyright: Photo (c) M.Boerger
IFD0.UserComment: ASCII
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.JPEGInterchangeFormatLength: 523
COMMENT.0: Comment #1.
COMMENT.1: Comment #2.
COMMENT.2: Comment #3end</PRE></TD></TR></TABLE> </TD></TR></TABLE><BLOCKQUOTE><P><B>Примечание: </B>
  если изображение содержит IFD0-данные, то COMPUTED содержит вхождение 
ByteOrderMotorola, которое равно 0 для байтового порядка little-endian (intel) 
и 1 - для big-endian (motorola). Это было введено в PHP 4.3.</P>
<P>Если Exif header содержит Copyright note, они сами содержат два значения. 
В качестве разрешения несоответствия стандарту Exif 2.10, раздел COMPUTED возвращает и <I>Copyright.Photographer</I>,
и <I>Copyright.Editor</I>, в то время как раздел IFD0 содержит байтовый массив с символом NULL, который 
разделяет оба вхождения. Либо только первое вхождение, если тип данных 
имеет неправильный формат (нормальное поведение Exif). 
COMPUTED будет также содержать вхождение <I>Copyright</I>, которое будет либо оригинальной copyright-строкой, либо списком разделённых 
запятыми photo и editor copyright.</P></BLOCKQUOTE><BLOCKQUOTE><P><B>Примечание: </B>
с тэгом UserComment существует та же проблема, что и с тэгом Copyright. Он 
может хранить два значения: первое - для используемой кодировки, а второе - 
само значение. То есть раздел IFD содержит только кодировку или массив байтов. Раздел COMPUTED будет 
хранить вхождения <I>UserCommentEncoding</I> и <I>UserComment</I>. Вхождение <I>UserComment</I> доступно в обоих вариантах, поэтому предпочтительнее использовать его, а не 
значение в разделе IFD0.</P><P> Если пользовательский комментарий использует кодировку Unicode или JIS, а 
модуль mbstring доступен, эта кодировка автоматически изменяется в 
соответствии с установками exif ini. Это было введено в PHP 4.3.</P></BLOCKQUOTE>
<BLOCKQUOTE><P><B>Примечание: </B>Height и Width вычисляются тем же способом, что и в
<A HREF="getimagesize.html"><B>getimagesize()</B></A>, поэтому их значения обязаны не быть частью любого из возвращаемых header. 
Также html это текстовая строка height/width, используемая внутри нормального HTML.</P></BLOCKQUOTE>
<BLOCKQUOTE><P><B>Примечание: </B>начиная с PHP 4.3, эта функция может читать все внедрённые IFD-данные, включая
массивы (возвращаемые как таковые). Также и размер внедрённого thumbnail возвращается в подмассиве
<I>THUMBNAIL</I>, и функция<B>exif_read_data()</B> может возвращать thumbnails в формате
TIFF. И, наконец, теперь нет ограничения на максимальный размер возвращаемых 
значений (если не достигнут предельный размер доступной памяти).</P></BLOCKQUOTE><BLOCKQUOTE><P>
<B>Примечание: </B>эта функция доступна только в PHP 4, скомпилированном с опцией<br>
<TT>--enable-exif</TT>. Её функциональность и поведение изменилось в PHP 4.2. Предыдущие версии 
очень нестабильны.</P><P>Начиная с PHP 4.3, пользовательский комментарий может автоматически 
изменить кодировку, если PHP 4 был скомпилирован с опцией <TT>--enable-mbstring</TT>.</P>
<P>Эта функция не требует библиотеки GD image.</P><P>См. также <A HREF="exif-thumbnail.html">
<B>exif_thumbnail()</B></A> и <A HREF="getimagesize.html"><B>getimagesize()</B></A>.</P></BLOCKQUOTE></TD><TD><IMG SRC="../imag/spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><TABLE BGCOLOR="#CCCCFF" BORDER="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="../imag/spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD>
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="3"><TR><TD WIDTH="33%" VALIGN="top">
<A HREF="exif-imagetype.html">Назад</A></TD><th WIDTH="34%" VALIGN="top">
<A HREF="../index.html">Оглавление</A></th><TD WIDTH="33%" ALIGN="right" VALIGN="top">
<A HREF="exif-thumbnail.html">Вперёд</A></TD></TR><TR><TD WIDTH="33%" VALIGN="top">exif_imagetype</TD>
<th WIDTH="34%" VALIGN="top"><A HREF="ref.image.html">Вверх</A></th><TD WIDTH="33%" ALIGN="right" VALIGN="top">
exif_thumbnail</TD></TR></TABLE></TD></TR></TABLE></TD></TR></TABLE></BODY></HTML>