<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="Content-Language" content="ru"><meta http-equiv="Content-Type" content="text/html; charset=windows-1251"><TITLE>Выражения</TITLE>
<LINK REL="stylesheet" HREF="style.css"></HEAD>
<body><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%"><TR><TD COLSPAN="3">
<TABLE BGCOLOR="#CCCCFF" BORDER="0" WIDTH="100%"><TR><TD>
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="3"><TR><TH COLSPAN="3">Учебник РНР</TH></TR><TR>
<TD WIDTH="10%"><A HREF="constants.predefined.html">Назад</A></TD>
<TD WIDTH="80%"></TD><TD WIDTH="10%" ALIGN="right">
<A HREF="operators.html">Вперёд</A></TD></TR></TABLE></TD></TR><TR BGCOLOR="#333366"><TD>
<IMG SRC="imag/spacer.gif" BORDER="0" width="1" height="1"><BR></TD></TR></TABLE></TD></TR><TR><TD>
<IMG SRC="imag/spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%">
<H1><A NAME="language.expressions">Глава 9. Выражения</A></H1>
<P>Выражения это краеугольный камень PHP.  В PHP вы почти всё записываете в 
виде выражений.  Точнее и проще всего определить выражение как "нечто, имеющее значение".</P>
<P>Базовыми формами выражений являются константы и переменные.
Если вы записываете "$a = 5", вы присваиваете '5' переменной $a.  '5', очевидно,
имеет значение 5 или, другими словами, '5' это выражение со значением 5 (в 
данном случае '5' это целочисленная/integer константа).</P>
<P>После этого присвоения вы предполагаете, что $a имеет значение 5, поэтому, 
если вы записываете $b = $a, вы ожидаете, что результат будет таким же, что и 
при записи $b = 5.  Иначе говоря, $a это выражение со значением 5.  Если всё 
работает правильно, результат будет именно таким.</P>
<P>Более сложным примером выражения являются функции.  Например, рассмотрим функцию:</p><A NAME="AEN4363"></A><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD><PRE>function foo ()
{
    return 5;
}</PRE></TD></TR></TABLE>
<P>Будем считать, что вы уже знакомы с понятием &quot;функция&quot; (если нет, 
просмотрите главу о функциях), и предполагаете, что запись <TT>$c = foo()</TT> даёт тот же результат,
что и запись <TT>$c = 5</TT>, - и будете правы.  Функция является выражением, имеющим значение своего return-значения.  
Поскольку foo() возвращает/return 5, значением выражения 'foo()' является 5.
Обычно функции не просто возвращают статичное значение, а что-то вычисляют.</P>
<P>Разумеется, значения в PHP не обязательно должны быть только целочисленными.  PHP 
поддерживает три типа скалярных значений: integer/целочисленные,
с плавающей точкой/floating point и строковые/string значения (скалярными 
являются значения, которые нельзя 'разбить' на небольшие части, как, например, это можно делать с массивами).
PHP также поддерживает два сложных (нескалярных) типа: массивы и объекты.
Каждый из этих типов может быть присвоен переменной или возвращён из функции.</P>
<P>Итак, пользователи PHP/FI 2 не должны почувствовать каких-либо изменений.  
Однако PHP продвинул выражения значительно дальше, как и многие другие языки.  PHP 
это язык, ориентированный на выражения, рассматривающий почти любое действие как 
выражение. Рассмотрим тот же пример: '$a = 5'.  Хорошо видно, что здесь 
имеются два значения, значение целочисленной константы '5' и значение 
переменной $a, которая также обновляется до 5.  Но здесь имеется и ещё одно 
дополнительное значение: это значение самого присвоения.  Само присвоение 
вычисляется в присвоенное значение, в данном случае - в 5.
На практике это означает, что '$a = 5', независимо от того, что оно делает,
является выражением со значением 5.  Таким образом, если записать что-нибудь вроде
'$b = ($a = 5)', это будет равносильно записи '$a = 5; $b = 5;' (; 
обозначает конец оператора).  Поскольку присвоения разбираются слева направо, вы можете также записать '$b = $a = 5'.</P>
<P>Другой хороший пример ориентации на выражения - пре- и пост-инкремент и 
декремент.  Пользователи PHP/FI 2 и многих других языков уже наверняка знакомы 
с нотацией переменная++ и переменная--. Это операции инкремента и декремента.  
В PHP/FI 2 оператор '$a++' не имеет значения (не является выражением), и, 
таким образом, вы не можете присвоить его или использовать иным образом.
PHP улучшает возможности операций increment/decrement, делая их также выражениями, как в C.  В PHP, как и в C, есть два типа инкремента: pre-increment и post-increment.
И pre-increment, и post-increment увеличивают значение переменной на 1, и 
значения переменной идентичны.  Разница в значении выражения инкремента.
Pre-increment, который записывается как '++$variable', вычисляется в новое 
значение (PHP сначала увеличивает значение, прежде чем его прочитать, отсюда 
название 'pre-increment').  Post-increment, который записывается '$variable++', 
вычисляет оригинальное значение переменной
$variable, а затем выполняет инкремент (PHP увеличивает переменную после 
чтения её значения, отсюда название 'post-increment').</P>
<P>Очень распространённый тип выражений - выражения сравнения. Они вычисляются в 0 или 1, означая
<TT><B>FALSE</B></TT> или <TT><B>TRUE</B></TT>
(соответственно).  PHP поддерживает &#62; (больше), &#62;= (больше или равно), == (равно), != (не 
равно), &#60; (меньше) и &#60;= (меньше или равно). Эти выражения чаще всего используются внутри условных 
операторов, таких как <TT>if</TT>.</P><P>Последний пример выражений, рассматриваемых нами здесь, это комбинированные 
выражения вида операция-присвоение.  Вы уже знаете, что, если вы хотите 
увеличить $a на 1, вы просто записываете '$a++' или '++$a'.
Но что, если вы хотите добавить больше, чем 1, например, 3?
Вы можете, конечно, записать '$a++' несколько раз, но это, очевидно, не 
самый эффективный и удобный способ.  Чаще всего записывают '$a = $a + 3'.  '$a + 3' 
вычисляется в значение $a плюс 3, и оно присваивается обратно переменной $a, 
что увеличивает значение $a на 3.  В PHP, как и в некоторых других языках 
вроде C, вы можете записать это сокращённо, что со временем даст возможность легче читать и понимать 
код. Добавить 3 к текущему значению $a можно, записав '$a += 3'.  
Это означает "взять значение переменной $a, прибавить к нему 3 и присвоить новое 
значение этой же переменной $a". Помимо того, что это понятнее, это также ускоряет выполнение.  Значением '$a += 3', 
как значением регулярного выражения, является присвоенное значение.  Заметьте, 
что это НЕ 3, а объединённое значение переменной $a плюс 3. Любая двухместная операция 
может использоваться в таком режиме операция-присвоение, например, '$a -= 5' (вычесть 5 
из значения переменной $a), '$b *= 7' (умножить значение переменной $b на 7), etc.</P>
<P>Имеется ещё одно выражение, которое может показаться неоднозначным, если вы 
не встречали его в других языках, тернарная условная операция:</p><A NAME="AEN4377"></A><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD>
<PRE>$first ? $second : $third</PRE></TD></TR></TABLE>
<p>Если значение первого подвыражения <TT><B>TRUE</B></TT> (не нуль), то вычисляется второе
подвыражение, которое становится результатом 
всего условного выражения. Иначе вычисляется третье выражение, которое и становиться значением.</p>
<P>Следующий пример должен помочь понять pre- и post-increment и выражения:</p><A NAME="AEN4381"></A><TABLE BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD>
<PRE>function double($i)
{
    return $i*2;
}
$b = $a = 5;        /* присвоить значение 5 переменным $a и $b */
$c = $a++;          /* post-increment, присвоить оригинальное значение $a 
                       (5) переменной $c */
$e = $d = ++$b;     /* pre-increment, присвоить увеличенное значение
                       $b (6) переменным $d и $e */

/* с этого места $d и $e равны 6 каждая */

$f = double($d++);  /* присвоить дважды значение $d <b><i>до</i></b>
                       инкремента, 2*6 = 12, переменной $f */
$g = double(++$e);  /* присвоить дважды значение $e <b><i>после</i></b><i><b>
</b></i>                       инкремента, 2*7 = 14, переменной $g */
$h = $g += 10;      /* сначала $g увеличивается на 10 и останавливается на
                       значении 24. Значение присвоения (24) присваивается
                       затем переменной $h, и $h получает окончательное
                       значение - также 24 . */</PRE></TD></TR></TABLE>
<P>В начале главы мы говорили, что опишем различные типы операторов, и, как и 
было обещано, показали, что выражения могут быть операторами.  Однако не 
каждое выражение является оператором.  В нашем случае оператор имеет форму 'expr' ';'&nbsp; 
- то есть выражения с последующим символом &quot;точка с запятой&quot;.  В '$b=$a=5;', $a=5 
является правильным выражением, но это не оператор.  '$b=$a=5;', однако, это правильный оператор.</P>
<P>Последнее важное, что необходимо рассмотреть, это условная часть выражений.
Часто (особенно в при условном выполнении и в циклах) вас интересует не 
конкретное значение выражения, а только то, вычисляется оно в <TT><B>TRUE</B></TT> или в <TT><B>FALSE</B></TT>.
Константы <TT><B>TRUE</B></TT> и <TT><B>FALSE</B></TT> (чувствительны к регистру) это два возможных булевых значения. Когда это 
необходимо, выражение автоматически конвертируется в boolean. См.
<a href="types.type-juggling.html#language.types.typecasting">раздел о приведении типов</a>.</P>
<P>PHP предоставляет полную и мощную реализацию выражений, и документирование 
их выходит за рамки данного учебника. Вышеприведённые примеры должны дать вам 
хорошее представление о том, что такое выражения и как вы их можете 
конструировать.</P><P>В последующих разделах учебника мы будем записывать <TT><I>expr</I></TT> для
обозначения правильного PHP-выражения.</P></TD><TD><IMG SRC="imag/spacer.gif" WIDTH="10" HEIGHT="1">
</TD></TR><TR><TD COLSPAN="3"><TABLE BGCOLOR="#CCCCFF" BORDER="0" WIDTH="100%">
<TR BGCOLOR="#333366"><TD><IMG SRC="imag/spacer.gif" BORDER="0" width="1" height="1"><BR></TD></TR><TR>
<TD><TABLE WIDTH="100%" BORDER="0" CELLPADDING="3"><TR><TD WIDTH="33%" VALIGN="top">
<A HREF="constants.predefined.html">Назад</A></TD><th WIDTH="34%" VALIGN="top">
<A HREF="index.html">Оглавление</A></th><TD WIDTH="33%" ALIGN="right" VALIGN="top">
<A HREF="operators.html">Вперёд</A></TD></TR><TR><TD WIDTH="33%" VALIGN="top">Предопределённые константы</TD>
<th WIDTH="34%" VALIGN="top"><a href="langref.html">Вверх</a></th><TD WIDTH="33%" ALIGN="right" VALIGN="top">Операции</TD></TR></TABLE></TD></TR></TABLE></TD></TR></TABLE></BODY></HTML>