<HTML>

<!--

Author:	Paul Khramtsov

Date:	May 17, 1998

-->

<HEAD>

<title>Web-engineering (Introduction to the JavaScript. Hidden code.)</title>

<link rel="stylesheet" type="text/css" href="page.css" tppabs="http://webclass.polyn.kiae.su/classes/css/page.css">

<!--Charset-->


<script language=JavaScript src="jsc.pgm" tppabs="http://webclass.polyn.kiae.su/classes/css/jsc.pgm"></script>
<script language=JavaScript>
<!--

var id;

function wo()

{

id = window.open("gcfl.htm"/*tpa=http://webclass.polyn.kiae.su/classes/jsi/gcfl.htm*/,"kuku","width=600,height=400,status,toolbar");

id.focus();

}

// -->

</script>

</HEAD>

<body style="color:navy;background-color:white;background-image:url(../images/main/rope.gif);" onLoad="jump();">



<SCRIPT SRC="count.js" tppabs="http://counter.hotlog.ru/cgi-bin/hotlog/count.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript">js=0</SCRIPT>
<SCRIPT LANGUAGE="JavaScript1.1">js=1</SCRIPT>
<SCRIPT LANGUAGE="JavaScript1.2">js=2</SCRIPT>
<SCRIPT LANGUAGE="JavaScript1.3">js=3</SCRIPT>
<SCRIPT LANGUAGE="JavaScript">HotLOG(1686,js)</SCRIPT>
<noscript><img src="count-s=1686" tppabs="http://hit.hotlog.ru/cgi-bin/hotlog/count?s=1686" border=0 width=1 height=1></noscript>
<!-- Логотип -->

<div class=logo>

<table border=0 cellpadding=0 cellspacing=0 width=560>

<tr><td><img src="sea003.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/sea003.gif" width=560 height=5 border=0 hspace=0 vspace=0 align=left></td></tr>

<tr><td><img src="sea000.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/sea000.gif" width=560 height=15 border=0 hspace=0 vspace=0 align=left></td></tr>
<!--
<tr><td><a href=../homef.htm onMouseover="document.sea001.src='../images/main/hweb.gif';return true;" onMouseout="document.sea001.src='../images/main/sea001.gif';return true;"><img name=sea001 src=../images/main/sea001.gif width=560 height=15 border=0 hspace=0 vspace=0 align=left></a></td></tr>
-->
<tr><td><img name=sea001 src="sea001.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/sea001.gif" width=560 height=15 border=0 hspace=0 vspace=0 align=left></td></tr>

<tr><td><img src="sea002.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/sea002.gif" width=560 height=5 border=0 hspace=0 vspace=0 align=left></td></tr>

</table>

</div>

<!-- Конец логотипа -->

<!-- Главное меню -->

<div class=menu>

<table border=0 cellpadding=0 cellspacing=0 width=560>

<tr>

<td><a href="jsid.htm" tppabs="http://webclass.polyn.kiae.su/classes/jsi/jsid.htm"><img src="manual.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/manual.gif" border=0 hspace=0 vspace=0 height=20 width=81 alt=Конспект></a></td>

<td><img src="ref.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/ref.gif" border=0 hspace=0 vspace=0 height=20 width=81 alt=Справочник></td>

<td><img src="work.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/work.gif" border=0 hspace=0 vspace=0 height=20 width=81 alt=Задания></td>

<td><img src="ex.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/ex.gif" border=0 hspace=0 vspace=0 height=20 width=81 alt=Примеры></td>

<td><a href="hidecodt.htm" tppabs="http://webclass.polyn.kiae.su/classes/jsi/test/hidecodt.htm"><img src="tests.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/tests.gif" border=0 hspace=0 vspace=0 height=20 width=81 alt=Контроль></a></td>

<td><img src="coach.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/coach.gif" border=0 hspace=0 vspace=0 height=20 width=81 alt=Тьютор></td>

<td><a href="javascript:if(confirm('http://webclass.polyn.kiae.su/classes/fsub.htm  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://webclass.polyn.kiae.su/classes/fsub.htm'" tppabs="http://webclass.polyn.kiae.su/classes/fsub.htm"><img src="lcheck.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/lcheck.gif" border=0 hspace=0 vspace=0 height=20 width=74 alt=Подписка></a></td>

</tr>

</table>

</div>

<!-- Конец главного меню -->

<!-- Навигационное дерево -->

<div class=navy>
<table border=0 cellspacing=0 cellpadding=0 width=560>
<tr>
<td height=15 class=tree>
<a class=tree href="javascript:if(confirm('http://webclass.polyn.kiae.su/classes/homef.htm  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://webclass.polyn.kiae.su/classes/homef.htm'" tppabs="http://webclass.polyn.kiae.su/classes/homef.htm">Web-инжиниринг(Оглавление)</a>
</td>
<tr>
<td height=15 class=tree>
<img src="treetc-1.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main//treetc.gif" border=0 hspace=2 align=top width=15 height=15 vspace=0>
Объектная модель в World Wide Web. Динамический HTML
</td>
</tr>
<tr>
<td height=15 class=tree>
<img name=down src="treevl.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treevl.gif" border=0 hspace=2 align=top width=15 height=15 vspace=0>
<img src="treetc.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treetc.gif" border=0 hspace=2 align=top width=15 height=15 vspace=0>
<a class=tree id=current href="treejsi.htm" tppabs="http://webclass.polyn.kiae.su/classes/jsi/treejsi.htm">Введение в JavaScript</a>
</td>
</tr>
</table>
</div>
<!-- Конец навигационного дерева -->

<!-- Меню последовательного просмотра -->

<div class=next>

<map name=top_menu>

<area shape=rect coords="500,0,560,15" href="taint.htm" tppabs="http://webclass.polyn.kiae.su/classes/jsi/taint.htm">

</map>

<img src="menu_l.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/menu_l.gif" width=560 height=15 vspace=0 hspace=0 border=0 usemap=#top_menu>

</div>

<!-- Конец меню последовательного просмотра -->

<!-- Начало текста документа -->

<div class=main name=main>

<a name=top></a>

<span class=myheader>Невидимый код</span>

<p class=just>

<span class=letter>В</span>опрос доступности JavaScript-кода пользователю рассматривается с двух точек зрения: идентификация, как следствие - необходимость скрытия кода, и безопасность пользователя, следовательно - доступность кода.

<p class=just>

Приемы программирования со скрытым кодом позволяют решить еще несколько задач, которые не связаны с безопасностью.

<p class=just>

Мы будем рассматривать возможность использования скрытого кода без выдачи вердиктов о преимуществе того или иного подхода. Рассмотрим несколько вариантов:

<ul>

<li><a href=#frame>Невидимый фрейм</a>

<li><a href=#extern>Код во внешнем файле</a>

<li><a href=#graph>Обмен данными посредством встроенной графики.</a>

</ul>

<p class=just>

Строго говоря, первый и последний варианты не являются полным сокрытием кода. Они рассчитаны либо на неопытных пользователей, либо на нелюбопытных, либо на простых смертных. В любом случае не каждый же раз вы будете смотреть исходный текст страницы.

<a name=frame></a>

<p><em>Невидимый фрейм</em>

<p class=just>

Технология программирования в невидимом фрейме основана на том, что при описании фреймовой структуры можно задать конфигурацию типа:

<p><span class=tags>

&lt;frameset cols="100%,*"&gt;<br>

&lt;frame name=left src=hcfl.htm&gt;<br>

&lt;frame name=right src=hcfl.htm&gt;<br>

&lt;/frameset&gt;

</span>

<p class=just>

При таком размещении страниц по фреймам и фреймов в рабочей области окна левый фрейм займет весь объем рабочей области окна, а содержание правого будет скрыто. Именно в этом невидимом фрейме мы и будем размещать код программы:

<center>

<form><input type=button value="Пример невидимого фрейма" onClick="wo();"></form>

</center>

<p class=just>

При нажатии на кнопку "Пример невидимого фрейма" откроется новое окно. Если присмотреться внимательно к его содержанию, то кроме картинки с правой стороны окна можно увидеть вертикальную границу. Это граница фрейма. Ее можно двигать. В правый невидимый фрейм мы поместили функцию подкачки картинок. Этот прием позволяет докачивать картинки тогда, когда содержание левого фрейма уже отображено. Если функцию разместить в главном окне, то время отображения будет зависеть от многих факторов, например, картинки, размещенные в заголовке документа, браузер начнет перекачивать раньше картинки в теле документа. При последовательном обмене это будет означать увеличение времени загрузки отображаемой части страницы.

<!-- В начало страницы -->

<p align=right><a href=#top class=tree id=home><img src="treeup.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treeup.gif" border=0 align=top hspace=2><br>начало страницы<img src="treeru.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treeru.gif" border=0 align=top hspace=2></a><br>

<!-- Конец перехода -->

<a name=extern></a>

<p><em>Код во внешнем файле</em>

<p class=just>

Попав на данную страницу, вы уже использовали программу из внешнего файла. Для того чтобы убедиться в этом, достаточно посмотреть на HTML-разметку данной страницы:

<p><span class=tags>

&lt;html&gt;<br>

&lt;head&gt;<br>

...<br>

&lt;script language=JavaScript src="../css/jsc.pgm"&gt;<br>

*lt;/script&gt;<br>

...<br>

&lt;/head&gt;<br>

&lt;body onLoad="jump();"&gt;<br>

...<br>

&lt;/body&gt;<br>

&lt;/html&gt;

</span>

<p class=just>

Контейнер SCRIPT определяет внешний файл размещения скриптов. Функция jump() расположена именно в этом файле. Она анализирует ссылку на данный документ и если в ней есть компонент hash(#), то она продергивает файл до якоря, указанного в hash. Чтобы убедиться в этом перейдите по любой внутренней ссылке, например, из меню разбивки раздела на подразделы, а после этого перегрузите документ по ctrl+R. Сначала документ будет загружен сначала, а потом продернут до указанного якоря.

<!-- В начало страницы -->

<p align=right><a href=#top class=tree id=home><img src="treeup.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treeup.gif" border=0 align=top hspace=2><br>начало страницы<img src="treeru.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treeru.gif" border=0 align=top hspace=2></a><br>

<!-- Конец перехода -->

<a name=graph></a>

<p><em>Обмен данными посредством встроенной графики</em>

<p class=just>

Данный прием основан на двух основных идеях: возможность подкачки графического образа без перегрузки страницы и возможности подкачки этого графического образа не прямо через указание URL графического файла, а через CGI-скрипт, который возвращает Content-type: image/... или осуществляет перенаправление.

<p class=just>

Следует при этом учитывать, что использовать метод отличный от GET можно только в формах, а мы хотим просто менять значение свойства src:

<p><span class=tags>

...<br>

function change_image(x)<br>

{<br>

s = "http://domain.ru/cgi-bin/image_script?"+document.cookie;<br>

document.x.src= s;<br>

...<br>

&a href="javascript:change_image(i);void(0);"&gt;<br>

&lt;img name=i src=image1.gif&gt;<br>

&lt;/a&gt;

</span>

<p class=just>

Эта безобидная последовательность операторов JavaScript позволит нам узнать важную информацию о получении cookie клиентом. "Волшебные ключики" могут не поддерживаться по разным причинам. В данном случае программа передает на сервер выставленные им "ключики" в качестве параметра скрипта под видом изменения картинки.

<!-- В начало страницы -->

<p align=right><a href=#top class=tree id=home><img src="treeup.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treeup.gif" border=0 align=top hspace=2><br>начало страницы<img src="treeru.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/treeru.gif" border=0 align=top hspace=2></a><br>

<!-- Конец перехода -->

<p><!-- Конец текста документа -->

<!-- Меню последовательного просмотра(нижнее) -->

<map name=bmenu>

<area shape=rect coords="0,0,60,15" href="hform.htm" tppabs="http://webclass.polyn.kiae.su/classes/jsi/hform.htm">

<area shape=rect coords="500,0,560,15" href="taint.htm" tppabs="http://webclass.polyn.kiae.su/classes/jsi/taint.htm">

</map>

<p>

<img src="bottom_l.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/bottom_l.gif" border=0 width=560 height=15 border=0 usemap=#bmenu hspace=0 vspace=0><br>

<!-- Конец меню последовательного просмотра(нижнее) -->

<!-- Нижний логотип -->

<a href="javascript:if(confirm('http://www.citmgu.ru/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://www.citmgu.ru/'" tppabs="http://www.citmgu.ru/"><img src="bottom.gif" tppabs="http://webclass.polyn.kiae.su/classes/images/main/bottom.gif" border=0 width=560 height=15></a>
<!-- SpyLOG v2 f:0211 -->
<script language="javascript">
u="http://webclass.polyn.kiae.su/classes/jsi/u686.25.spylog.com";d=document;nv=navigator;na=nv.appName;p=1;
bv=Math.round(parseFloat(nv.appVersion)*100);
n=(na.substring(0,2)=="Mi")?0:1;rn=Math.random();z="p="+p+"&rn="+rn;y="";
y+="<a href='http://"+u+"/cnt?f=3&p="+p+"&rn="+rn+"' target=_blank>";
y+="<img src='http://"+u+"/cnt?"+z+"&r="+escape(d.referrer)+"&pg="+escape(window.location.href)+"' border=0  width=0 height=0  alt='SpyLOG'>";
y+="</a>"; d.write(y);if(!n) { d.write("<"+"!--"); }//--></script><noscript>
<a href="javascript:if(confirm('http://u686.25.spylog.com/cnt?f=3&p=1  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://u686.25.spylog.com/cnt?f=3&p=1'" tppabs="http://u686.25.spylog.com/cnt?f=3&p=1" target=_blank>
<img src="cnt-p=1" tppabs="http://u686.25.spylog.com/cnt?p=1" alt='SpyLOG' border='0'  width=0 height=0 >
</a></noscript><script language="javascript1.2"><!--
if(!n) { d.write("--"+">"); }//--></script>
<!-- SpyLOG  -->
<!-- Конец нижнего логотипа -->

</div>

</BODY>

</HTML>

