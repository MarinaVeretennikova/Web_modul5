<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE></TITLE>
<META content="TEXT/HTML; CHARSET=WINDOWS-1251" http-equiv=CONTENT-TYPE>
<META content="Microsoft FrontPage 4.0" name=GENERATOR>
<STYLE></STYLE>
</HEAD>
<body background=../fon.jpg>
<ul>

  <li><a href="#a"><font face="Times New Roman" size=3>Глава1.
    Знакомство с PHP</font> </a> </li>
  <ul>
    <li><a href="#b"><font face="Times New Roman" size="3">Краткая
      история</font>
      </a>
    </li>
    <li><a href="#c"><font face="Times New Roman" size="3">Характеристики
      PHP</font>
      </a>
      <ul>
        <li><a href="#d"><font face="Times New Roman" size="3">Традиционность</font></a></li>
        <li><a href="#e"><font face="Times New Roman" size="3">Простота</font></a></li>
        <li><a href="#f"><font face="Times New Roman" size="3">Эффективность</font></a></li>
        <li><a href="#g"><font face="Times New Roman" size="3">Безопасность</font></a></li>
        <li><a href="#h"><font face="Times New Roman" size="3">Гибкость</font></a></li>
        <li><a href="#i"><font face="Times New Roman" size="3">Бесплатное
          распространение</font></a></li>
      </ul>
    </li>
    <li><a href="#j"><font face="Times New Roman" size="3">Рекомендации
      пользователей</font>
      </a>
    </li>
    <li><a href="#k"><font face="Times New Roman" size="3">Вводный
      пример</font>
      </a>
    </li>
    <li><a href="#l"><font face="Times New Roman" size="3">Загрузка
      PHP/Apache</font>
      </a>
    </li>
    <li><a href="#m"><font face="Times New Roman" size="3">Установка
      и настройка</font>
      </a>
      <ul>
        <li><a href="#n"><font face="Times New Roman" size="3">Системы,
          не входящие в семейство Windows</font></a></li>
        <li><a href="#o"><font face="Times New Roman" size="3">Установка
          в Windows 95/98/NT</font></a></li>
      </ul>
    </li>
    <li><a href="#p"><font face="Times New Roman" size="3">Конфигурация
      PHP</font>
      </a>
      <ul>
        <li><a href="#q"><font face="Times New Roman" size="3">Общие параметры
          конфигурации</font></a></li>
      </ul>
    </li>
    <li><a href="#r"><font face="Times New Roman" size="3">Основные
      конструкции PHP</font>
      </a>
      <ul>
        <li><a href="#s"><font face="Times New Roman" size="3">Переход
          в PHP</font></a></li>
        <li><a href="#t"><font face="Times New Roman" size="3">Внедрение
          HTML в код PHP</font></a></li>
        <li><a href="#u"><font face="Times New Roman" size="3">Включение
          нескольких сценариев PHP</font></a></li>
        <li><a href="#v"><font face="Times New Roman" size="3">Комментарии
          в коде PHP</font></a></li>
      </ul>
    </li>
    <li><a href="#w"><font face="Times New Roman" size="3">Итоги</font></a></li>
  </ul>
</ul>
<A NAME="a"></A>
<p></p>
<p><font face="Times New Roman" color="#000000" size="5">ГЛАВА 1</font>
</p>
<p><font face="Times New Roman" color="#000000" size="5">Знакомство с РНР</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Последние пять лет ознаменовались
фантастическим развитием Интернета и новых
способов общения между людьми. На переднем
крае этого явления находится World Wide Web (WWW).
Ежедневно в этой новой коммуникационной
среде открываются тысячи новых сайтов, а
потребителям предлагаются новые виды услуг.
Вместе с бурным развитием рынка появился
огромный спрос на новые технологии и
разработчиков, владеющих ими. Если вы
читаете этот абзац, вероятно, вы уже
являетесь или скоро станете web-разработчиком.
Впрочем, какой бы ни была ваша профессия, вы
выбрали эту книгу потому, что слышали о
замечательной новой технологии — РНР.
 </font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
В этой главе вы познакомитесь с языком РНР,
получите представление о его истории и
возможностях, а также основную информацию,
необходимую для разработки сайтов с
поддержкой РНР. Надеюсь, приведенные
примеры пробудят ваш энтузиазм и наглядно
покажут, какие перспективы РНР открывает
перед вами и вашей организацией. Вы узнаете,
как установить и настроить программное
обеспечение РНР на компьютерах с Linux/UNIX или
Windows и как внедрить РНР в HTML. К концу главы вы
будете готовы к тому, чтобы углубленно
заняться изучением других важных аспектов
языка РНР. Итак, зажигайте свет, включайте
свою любимую музыку и устраивайтесь
поудобнее. Пришла пора познакомиться с тем,
что станет одним из важнейших пунктов в
вашем резюме, - с программированием на РНР.
</font></p>
<b>
<p><A NAME="b"></A><font face="Times New Roman" color="#000000" size="4">Краткая история</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
История РНР начинается с 1995 года, когда
независимый программист-контрактник по
имени Расмус Лердорф (Rasmus Lerdorf) написал
сценарий Perl/CGI для подсчета количества
посетителей сайта, прочитавших его
онлайновое резюме. Его сценарий решал две
задачи: регистрацию данных посетителя и
вывод количества посетителей на web-странице.
Развитие WWW еще только начиналось, никаких
специальных средств для решения этих задач
не было, и к автору хлынул поток сообщений с
вопросами. Лердорф начал бесплатно
раздавать свой инструментарий, названный <i>Personal
Home Page </i>(РНР) или <i>Hypertext Processor </i>(гипертекстовый
процессор).
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Шумный успех инструментария РНР заставил
Лердорфа приступить к разработке
расширений РНР. Одно из расширений
преобразовывало данные, введенные на форме
HTML, в символические переменные, что
позволяло экспортировать их в другие
системы. Чтобы добиться поставленной цели,
Лердорф решил в дальнейших разработках
перейти с Perl на С. Расширение существующего
инструментария РНР привело к появлению РНР
2.0, или PHP-FI (Personal Home Page — Form Interpretator). В
усовершенствовании версии 2.0 принимали
участие программисты со всего мира.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Новая версия РНР пользовалась
исключительной популярностью, и вскоре
образовалась основная команда
разработчиков. Они сохранили исходную
концепцию внедрения программного кода
прямо в HTML и переписали заново механизм
лексического анализа, что привело к
появлению РНР 3.0. К моменту выхода версии 3.0
в 1997 году свыше 50 000 пользователей применяли
РНР для улучшения своих web-страниц.
</font></p>
<p><i><font size="3" color="#000000"><img border="0" src="prim.gif" align=left width="36" height="35">В
1997 году было решено, что сокращение РНР
должно означать не «Personal Home page», а «РНР Hypertext
Processor»&nbsp; </font></i></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
В течение следующих двух лет
стремительное развитие РНР продолжалось. В
язык добавлялись сотни новых функций, а
количество пользователей стремительно
росло. В начале 1999 года служба Netcraft (http://www.netcraft.com)
сообщила о том, что, по минимальным оценкам,
число пользователей РНР превысило 1 000 000, в
результате чего РНР стал одним из самых
популярных сценарных языков в мире.</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
В начале 1999 года было объявлено о
предстоящем выходе РНР 4.0. Хотя одной из
сильнейших сторон РНР была эффективность
выполнения сценариев, при первоначальных
разработках не предполагалось, что на базе
РНР будут строиться крупномасштабные
приложения. По этой причине была начата
работа над более устойчивым механизмом
лексического анализа, больше известным под
названием Zend (http://www.zend.com). Работа шла быстро
и завершилась 22 мая 2000 года выпуском РНР
версии 4.0.</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Кроме лексического анализатора Zend,
компания Zend Technologies (Израиль) распространяет
оптимизатор Zend, который повышает выигрыш в
быстродействии от применения лексического
анализатора Zend. Тесты показывают, что
ускорение работы программы в результате
использования оптимизатора составляет от 40
до 100 %. За дополнительной информацией
обращайтесь на сайт Zend.</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
На момент написания этой книги, по данным
Netcraft (http://www.netcraft.com), программное
обеспечение РНР было установлено более чем
в 3,6 миллиона доменов. Будущее РНР выглядит
светлым, поскольку продукт продолжает
активно использоваться как на крупных web-сайтах,
так и на компьютерах отдельных
пользователей.</font></p>
<p>
<font SIZE="3" COLOR="#000000">
РНР лучше всего охарактеризовать как
работающий на стороне сервера встроенный
язык сценариев Web, позволяющий
разработчикам быстро и эффективно</font><sup> </sup>
<font SIZE="3" COLOR="#000000">
строить динамические web-приложения. С
позиций грамматики и синтаксиса РНР
напоминает язык программирования С, хотя
разработчики не постеснялись включить в
него средства из других языков, в том числе
из Perl, Java и C++. Среди ценных заимствованных
возможностей — поддержка регулярных
выражений, мощные средства работы с
массивами, объектно-ориентированная
методология и обширная поддержка работы с
базами данных.
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
При написании приложений, выходящих за
рамки традиционной, статической
методологии разработки web-страниц (то есть
HTML), РНР также может послужить ценным
инструментом для создания и управления
динамическим содержанием, который
используется наряду с JavaScript, стилями, WML (Wireless
Markup Language) и другими полезными языками.
Благодаря наличию сотен стандартных
функций РНР в состоянии решить практически
любую задачу, которая может придти в голову
разработчику. В нем имеется обширная
поддержка создания графики и операций с ней,
математических вычислений, средств
электронной коммерции и таких популярных
технологий, как XML (Extensible Markup Language), ODBC (Open
Database Connectivity) и Macromedia Shockwave. Широкий выбор
возможностей избавляет от необходимости
рутинной и непростой работы по подключению
сторонних модулей, поэтому многие
разработчики со всего мира останавливают
свой выбор на РНР.
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Одним из главных достоинств РНР является
тот факт, что он внедряется прямо в HTML-код,
поэтому программисту не приходится писать
программу с множеством команд для простого
вывода HTML. Код HTML и РНР можно чередовать по
мере необходимости. РНР позволяет написать
фрагмент следующего вида:
</font></p>
</font>
<p><font color="#000000" size="3" face="Courier New">&lt;html&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;title&gt;&lt;? print &quot;Hello world!&quot;; ?&gt;&lt;/title&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;/html&gt;</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Сообщение &quot;Hello world!&quot; выводится в
заголовке web-страницы. Интересно то, что
команда print внутри конструкции, которая
обычно называется экранирующими
последовательностями РНР (&lt;?...?&gt;),
представляет собой законченную программу.
Ни длинного кода инициализации, ни
включения библиотек — программа состоит
лишь из того кода, который непосредственно
решает поставленную задачу!
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Конечно, для выполнения сценариев РНР
необходимо предварительно установить и
настроить программное обеспечение РНР на
сервере. Этот процесс описан в разделе «Загрузка
и установка РНР/Apache» настоящей главы.
Разделу предшествуют фрагменты из отзывов
нескольких пользователей, выступающих в
пользу РНР, с кратким обзором языка и его
истории. Но прежде чем браться за процесс
установки, мы познакомимся с некоторыми
характеристиками РНР. Этой теме посвящен
следующий раздел.
</font></p>
<b>
<p>
</b></font><b>
<A NAME="c"></A><font face="Times New Roman" color="#000000" size="4">Характеристики РНР</font></p>
</b><font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Как вы, вероятно, уже поняли, главным
фактором при проектировании языка РНР
является практичность. РНР должен
предоставить программисту средства для
быстрого и эффективного решения
поставленных задач. Практический характер
РНР обусловлен пятью важными
характеристиками:
</font></p>
<ul>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
традиционностью;
</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
простотой;
</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
эффективностью;
</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
безопасностью;
</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
гибкостью.
</font></li>
</ul>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Существует еще одна «характеристика»,
которая делает РНР особенно
привлекательным: он распространяется
бесплатно!
</font></p>
<b>
<p>
</b><A NAME="d"></A></font><font face="Times New Roman" color="#000000" size="4">Традиционность</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Язык РНР кажется знакомым программистам,
работающим в разных областях. Многие
конструкции языка позаимствованы из Си Perl,
а нередко код РНР практически неотличим от
того, что встречается в типичных программах
С или Pascal. Это заметно снижает начальные
усилия при изучении РНР.
</font></p>
<b>
<p>
</b><A NAME="e"></A></font><font face="Times New Roman" color="#000000" size="4">Простота</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Сценарий РНР может состоять из 10 000 строк
или из одной строки — все зависит от
специфики вашей задачи. Вам не придется
подгружать библиотеки, указывать
специальные параметры компиляции или что-нибудь
в этом роде. Механизм РНР просто начинает
выполнять код после первой экранирующей
последовательности (&lt;?) и продолжает
выполнение до того момента, когда он
встретит парную экранирующую
последовательность (?&gt;). Если код имеет
правильный синтаксис, он исполняется в
точности так, как указал программист.
</font></p>
<b>
<p>
</b><A NAME="f"></A></font><font face="Times New Roman" color="#000000" size="4">Эффективность</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Эффективность является исключительно
важным фактором при программировании для
многопользовательских сред, к числу
которых относится и WWW. В РНР 4.0 был
реализован механизм выделения ресурсов и
обеспечена улучшенная поддержка объектно-ориентированного
программирования, а также средства
управления сеансом. В последней версии
появился и механизм подсчета ссылок (reference
counting), предотвращающий выделение лишней
памяти.
</font></p>
<b>
<p>
</b><A NAME="g"></A></font><font face="Times New Roman" color="#000000" size="4">Безопасность</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
РНР предоставляет в распоряжение
разработчиков и администраторов гибкие и
эффективные средства безопасности, которые
условно делятся на две категории: средства
системного уровня и средства уровня
приложения.
</font></p>
<b>
<p>
</b></font><font color="#000000" face="Times New Roman" size="3"><b>Средства безопасности системного уровня</b></font></p>
<font face="Times New Roman">
<p><font SIZE="3" COLOR="#000000">
В РНР реализованы механизмы безопасности,
находящиеся под управлением
администраторов; при правильной настройке
РНР это обеспечивает максимальную свободу действий и безопасность. РНР
может работать в так называемом <i>безопасном</i></font><i><font FACE="Times New Roman" SIZE="3" COLOR="#000000">
режиме </font></i><font SIZE="3" COLOR="#000000">(safe
mode), который ограничивает возможности
применения РНР пользователями по ряду
важных показателей. Например, можно
ограничить максимальное время выполнения и
использование памяти (неконтролируемый
расход памяти отрицательно влияет на
быстродействие сервера). По аналогии с cgi-bin
администратор также может устанавливать
ограничения на каталоги, в которых
пользователь может просматривать и
исполнять сценарии РНР, а также
использовать сценарии РНР для просмотра
конфиденциальной информации на сервере (например,
файла passwd).
</font></p>
<b>
<p><font face="Times New Roman" COLOR="#000000" size="3">
Средства безопасности уровня приложения
</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
В стандартный набор функций РНР входит
ряд надежных механизмов шифрования. РНР
также совместим с многими приложениями
независимых фирм, что позволяет легко
интегрировать его с защищенными
технологиями электронной коммерции (e-commerce).
Другое преимущество заключается в том, что
исходный текст сценариев РНР нельзя
просмотреть в браузере, поскольку сценарий
компилируется до его отправки по запросу
пользователя. Реализация РНР на стороне
сервера предотвращает похищение
нетривиальных сценариев пользователями,
знаний которых хватает хотя бы для
выполнения команды View Source.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Тема безопасности настолько важна, что ей
посвящена целая глава. За подробной
информацией о средствах безопасности РНР
обращайтесь к главе 16.
</font></p>
<p><A NAME="h"></A><font color="#000000" size="4">Гибкость</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Поскольку РНР является встраиваемым (embedded)
языком, он отличается исключительной
гибкостью по отношению к потребностям
разработчика. Хотя РНР обычно
рекомендуется использовать в сочетании с
HTML, он с таким же успехом интегрируется и в
JavaScript, WML, XML и другие языки. Кроме того,
хорошо структурированные приложения РНР
легко расширяются по мере необходимости (впрочем,
это относится ко всем основным языкам
программирования).
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Нет проблем и с зависимостью от браузеров,
поскольку перед отправкой клиенту сценарии
РНР полностью компилируются на стороне
сервера. В сущности, сценарии РНР могут
передаваться любым устройствам с
браузерами, включая сотовые телефоны,
электронные записные книжки, пейджеры и
портативные компьютеры, не говоря уже о
традиционных PC. Программисты, занимающиеся
вспомога-тельными утилитами, могут
запускать РНР в режиме командной строки.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Поскольку РНР не содержит кода,
ориентированного на конкретный web-сервер,
пользователи не ограничиваются
определенными серверами (возможно,
незнакомыми для них). Apache, Microsoft IIS, Netscape
Enterprise Server, Stronghold и Zeus — РНР работает на всех
перечисленных серверах. Поскольку эти
серверы работают на разных платформах, РНР
в целом является платформенно-незави-симым
языком и существует на таких платформах,
как UNIX, Solaris, FreeBSD и Windows 95/98/NT.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Наконец, средства РНР позволяют
программисту работать с внешними
компонентами, такими как Enterprise Java Beans или
СОМ-объекты Win32. Благодаря
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
этим новым возможностям РНР занимает
достойное место среди современных
технологий и обеспечивает масштабирование
проектов до необходимых пределов.
</font></p>
<p><A NAME="i"></A><font color="#000000" size="4">Бесплатное распространение</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Стратегия Open Source наделала немало шуму в
программной отрасли. Распространение
исходных текстов программ в массах оказало
несомненно благотворное влияние на многие
проекты, в первую очередь — Linux, хотя и успех
проекта Apache сильно подкрепил позиции
сторонников Open Source. Сказанное относится и к
истории создания РНР, поскольку поддержка
пользователей со всего мира оказалась
очень важным фактором в развитии проекта
РНР.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Принятие стратегии Open Source и бесплатное
распространение исходных текстов РНР
оказало неоценимую услугу пользователям.
Вдобавок, отзывчивое сообщество
пользователей РНР является своего рода «коллективной
службой поддержки», и в популярных
электронных конференциях можно найти
ответы даже на самые сложные вопросы.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
В следующем разделе «Рекомендации
пользователей» приведены свидетельства
трех видных профессионалов в области web-разработок.
Из них становится ясно, почему они считают
РНР такой замечательной технологией.
</font></p>
<b>
<p><A NAME="j"></A><font face="Times New Roman" color="#000000" size="4">Рекомендации
пользователей</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
«Мы в течение долгого времени
поддерживали личные контакты с некоторыми
разработчиками РНР и вели с ними обширную
переписку. Когда у разработчиков РНР
возникали какие-то проблемы, относящиеся к
MySQL, мы всегда были готовы помочь им в поиске
решения. Кроме того, мы включили в MySQL
несколько новых возможностей лишь для того,
чтобы улучшить его интеграцию с РНР.
Результатом наших усилий стало то, что MySQL
превосходно работает с РНР, — и мы
позаботимся о том, чтобы это положение
сохранилось и в будущем!»
</font></p>
<p align="right"><font face="Times New Roman" SIZE="3" COLOR="#000000">
Майкл «Монти» Видениус (Michael «Monty» Widenius),
</font></p>
<p align="right"><font face="Times New Roman" SIZE="3" COLOR="#000000">
разработчик MySQL
</font></p>
<p align="right"><font face="Times New Roman" SIZE="3" COLOR="#000000">
<a href="http://www.mysql.com">http://www.mysql.com</a>
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
«Выбор РНР для реализации mp3.lycos.com был
обусловлен несколькими причинами. Главной
причиной стали сжатые сроки работы над
проектом — ведь РНР ускоряет процесс
разработки. Другой причиной была высокая
эффективность — мы перешли от 0 к 1,4
миллиона посещений в сутки, и РНР с этим
прекрасно справился. Третья причина
заключалась в том, что я твердо знал: если на
стадии тестирования с повышенной нагрузкой
в РНР обнаружатся какие-либо ошибки, я смогу
их самостоятельно исправить, поскольку РНР
распространяется вместе с исходными
текстами».
</font></p>
<p align="right"><font face="Times New Roman" SIZE="3" COLOR="#000000">
Стиг Баккен (Stig Bakken),
</font></p>
<p align="right"><font face="Times New Roman" SIZE="3" COLOR="#000000">
FAST Search &amp; Transfer ASA
</font></p>
<p align="right"><font face="Times New Roman" SIZE="3" COLOR="#000000">
<a href="http://www.fast.no">http://www.fast.no</a></font>

</p>

<p>

<font face="Times New Roman" SIZE="3" COLOR="#000000">
«Я использовал РНР с первых дней, еще с
версии PHP/FI 1.x. Мне понравилось, что я могу
обрабатывать формы и настраивать страницы
«на ходу» при помощи такого простого языка.
Вместе с потребностями моей компании
развивался и РНР.
</font></p>
<p>

<font face="Times New Roman" SIZE="3" COLOR="#000000">
В наши дни РНР обладает исключительно
богатыми возможностями. Мы используем его
практически во всех создаваемых web-сайтах,
включая 32bit.com и DevShed.com. Мы даже
воспользовались им в Info West для реализации
службы поддержки, управления учетными
записями и отслеживания портов.
</font></p>
<p>

<font face="Times New Roman" SIZE="3" COLOR="#000000">
Эволюция РНР и признание его мировым
сообществом — классический пример
успешного ведения проекта с открытыми
исходными текстами. Широта взглядов
создателей, поддержка сообщества и хорошее
сопровождение кодовой базы привели РНР к
успеху, о котором многие коммерческие
проекты могут лишь мечтать. Я с оптимизмом
смотрю в будущее РНР и рекомендую каждому
web-разработчику попробовать его в деле.
Возможно, вы, как и я, уже не расстанетесь с
ним».
</font></p>
<p align="right">

<font face="Times New Roman" SIZE="3" COLOR="#000000">
Рэнди Косби (Randy Cosby),
</font></p>
<p align="right">

<font face="Times New Roman" SIZE="3" COLOR="#000000">
президент nGenuity, Inc.
DevShed
</font></p>
<p align="right"><font face="Times New Roman" SIZE="3" COLOR="#000000">
<a href="http://www.devshed.com">http://www.devshed.com</a>
</font></p>
</font>
<b>
<p><A NAME="k"></A><font color="#000000" face="Times New Roman" size="4">Вводный пример</font></p>
</b><font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Пример, приведенный в листинге 1.1,
наглядно показывает, как легко РНР
интегрируется с HTML-кодом.
</font></p>
<p></font><font face="Times New Roman" color="#000000" size="3"><i><b>Листинг 1.1.</b> Создание динамической
страницы РНР</i><font COLOR="#000000">  &nbsp;
</font></font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;?
</font></p>
<p><font face="Courier New" color="#000000" size="3">
// Присвоить значения нескольким
переменным
</font></p>
<p><font face="Courier New" color="#000000" size="3">
$site_title = &quot;РНР Recipes&quot;;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
$bg_color = &quot;white&quot;;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
$user_name = &quot;Chef Luigi&quot;;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
?&gt;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
&lt;html&gt;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
&lt;head&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;title&gt;&lt;? print $site_title; ?&gt;&lt;/title&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;/head&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;body bgcolor=&quot;&lt;? print $bg color; ?&gt;&quot; &gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;?
</font></p>
<p><font face="Courier New" color="#000000" size="3">
// Вывести приветствие с датой и именем
пользователя. print &quot;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
РНР Recipes | &quot;.dateC'F d. Y&quot;).&quot; &lt;br&gt; Greetings,
$user_name! &lt;br&gt;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
&quot;;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
?&gt;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
&lt;/body&gt;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
&lt;/html&gt;
</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
На рис. 1.1 показано, как выглядит сценарий
при выполнении в браузере.</font></p>
<p><img border="0" src="1.1.jpg" width="495" height="339"></p>
<p></font><b><font face="Times New Roman"><font color="#000000" size="3"><i>Рис. 1.1.
</i> </font></font></b><i><font color="#000000" size="3" face="Times New Roman">Результаты
выполнения сценария в браузере</font></i></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Неплохо, правда? Я уверен, что читатель уже
перебирает в уме новые возможности. Но не
будем торопиться — возможно, вам еще
придется установить и настроить РНР на
своем компьютере. Этой теме посвящены
следующие разделы.
</font></p>
<b>
<p>
</b>
</font><b>
<A NAME="l"></A><font color="#000000" face="Times New Roman" size="4">Загрузка РНР/Apache</font></p>
</b>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Прежде чем следовать дальше, я рекомендую
потратить немного времени на загрузку,
установку и настройку РНР и web-сервера на
вашем компьютере. Хотя РНР совместим с
разными web-серверами, я предполагаю, что вы
используете Apache — во-первых, это самый
популярный web-сервер на сегодняшний день, во-вторых,
он чаще всего работает с РНР. Впрочем, в
целом процессы установки для разных web-серверов
имеют много общего.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Поставку РНР можно загрузить с
официального сайта РНР или с любого из «зеркальных»
сайтов по всему миру. Самый свежий список «зеркальных»
сайтов находится по адресу <a href="http://www.php.net">http://www.php.net</a>.
При
загрузке РНР можно выбрать один из двух
форматов:
</font></p>
<ul>
  <li> <font face="Times New Roman" SIZE="3" COLOR="#000000">
 исполняемый формат Win32;
</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
исходный текст.
</font></li>
</ul>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Исполняемый формат Win32 предназначен для
пользователей Windows 95/98/ NT/2000. Хотя исходный
текст можно откомпилировать и на платформе
Windows, для большинства пользователей это
необязательно. Впрочем, если вы настаиваете
на компиляции (кстати, в книге этот процесс
не рассматривается), вам понадобится
компилятор Visual C++ одной из последних версий.
За подробностями компиляции обращайтесь по
адресу http://www.php.net/ version4/win32build.php. Установка
исполняемых файлов Win32 описана далее в этой
главе.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Пользователям других систем придется
самостоятельно откомпилировать исходный
текст программы. Хотя многих новичков эта
перспектива приводит в ужас, на самом деле
это довольно просто. Возможно, вас
интересует, распространяется ли РНР в
формате RPM (RedHat Package Manager)? Да,
распространяется, хотя эти пакеты не
представлены на официальном сайте РНР. За
инструкциями и дополнительной информацией
о местонахождении различных поставок
обращайтесь к материалам электронных
конференций. Обобщенный процесс компиляции
рассматривается далее.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Зайдите на сайт http://www.php.net и загрузите с
него ту поставку, которая лучше всего
отвечает вашим потребностям. Время
загрузки зависит от типа и скорости
подключения. Кроме того, имеется
возможность получить документацию. Я
настоятельно рекомендую выбрать самую
новую версию.
</font></p>
<b>
<p></b></font><i><font face="Times New Roman" color="#000000" size="3">
<img border="0" src="sovet.gif" align=left width="36" height="35">На
момент издания книги последней устойчиво
работающей версией был РНР 4.0.3. Конечно,
пакет РНР постоянно развивается, и номер
версии непременно изменится. Я рекомендую
загрузить самую свежую надежную версию
продукта.</font></i></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Если вы еще не установили сервер Apache, вам
также следует выбрать его последнюю версию.
Пакеты находятся в каталоге http://www.apache.org/dist/binaries,
содержащем подкаталоги для разных
операционных систем. Загрузите вариант,
соответствующий вашим потребностям.
Подробное описание настройки РНР для всех
существующих платформ и web-серверов выходит
за рамки этой книги, поэтому я уделю
основное внимание серверу Apache. Независимо
от того, какой web-сервер вы собираетесь
использовать, я рекомендую прочитать
дальнейшие разделы, посвященные настройке,
— вы получите некоторое представление о
тех общих проблемах, с которыми можете
столкнуться.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Установка новых программ нередко
превращается в непростое испытание для
новичков. Однако разработчики РНР
предприняли дополнительные усилия для того,
чтобы установка РНР проходила относительно
просто. В следующих разделах перечислены
действия, которые необходимо выполнить для
установки и настройки РНР в Win32 и на других
платформах.
</font></p>
<b>
<p><img border="0" src="prim.gif" align=left width="36" height="35"></b></font><i><font face="Times New Roman" color="#000000" size="3">В
дальнейших главах вы познакомитесь с
сервером баз данных MySQL, и на примере этого
популярного продукта будет
продемонстрирован процесс интеграции web-приложений
с базами данных. Чтобы
поэкспериментировать с этими примерами,
вам придется установить пакет MySQL (http://www.mysql.com).
MySQL, как и РНР, существует в версиях для Windows
и для других платформ. Хотя в документации
MySQL приведены подробные инструкции по
установке, возможно, вам стоит
предварительно просмотреть начало главы 11,
где приводится общая информация о сервере
баз данных MySQL.</font></i></p>
<b>
<p><A NAME="m"></A><font color="#000000" face="Times New Roman" size="4">Установка и настройка</font></p>
</b>
<p><font face="Times New Roman"><font SIZE="3" COLOR="#000000">
Предполагается, что к настоящему моменту
вы успешно загрузили РНР и Apache. Следующий
шаг — выбор способа установки. Для
компьютеров, не использующих систему Windows,
существует три варианта: двоичный файл CGI,
статический
модуль Apache и динамический модуль Apache.
Скорее всего, вы не захотите строить РНР в
виде двоичного файла CGI. Более того,
построение РНР в виде серверного модуля
имеет некоторые преимущества, поэтому я
уделю внимание построению РНР в виде
статического и динамического модуля.
Главное различие между этими двумя
вариантами заключается в том, что при любых
изменениях в статическом модуле РНР
придется заново компилировать и Apache, и РНР,
а изменения в динамическом модуле РНР
потребуют компиляции только РНР, без
сервера.
</font>
</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
На компьютерах с системой Windows РНР может
устанавливаться в виде либо двоичного
файла CGI, либо статического модуля Apache. На
этот раз я опишу построение двоичного файла
CGI, потому что пользователи Windows обычно
используют вместо Apache другие web-серверы (например,
Microsoft Internet Information Server или Microsoft Personal Web Server).
CGI-версия легко интегрируется с этими
серверами. Хотя описанный процесс
установки относится к РНР/Apache, установка
для перечисленных выше web-серверов
выполняется практически так же.
</font></p>
<b><u>
<p></u></b></font><i><font face="Times New Roman" color="#000000" size="3"><img border="0" src="prim.gif" align=left width="36" height="35">Как
говорилось ранее, РНР4 поддерживает
разнообразные web-серверы, в том числе AOL Server,
Netscape Enterprise Server, Microsoft IIS, Zeus и многие другие.
Впрочем, я ограничусь описанием установки
для сервера Apache. За подробными инструкциями
о том, как установить РНР для других
серверов, обращайтесь к документации РНР по
адресу <a href="http://www.php.net">http://www.php.net</a>.</font></i></p>
<font face="Times New Roman">
<p><A NAME="n"></A><font color="#000000" size="4">Системы, не входящие в семейство Windows</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Независимо от того, какой вариант был
выбран, установка начинается с распаковки
архивов. Для распаковки выполните два
простых действия:
</font>
</p>
<ol>
  <li><font face="Times New Roman" size="3" color="#000000">Выполните следующие команды:
</font></li>
</font>
</ol>
<blockquote>
<p><font face="Courier New" size="3" color="#000000">
gunzip apache_1.3.9.tar.gz
</font></p>
<p><font face="Courier New" size="3" color="#000000">
gunzip php-4.0.0.tar.gz
</font></p>
</blockquote>
<font face="Times New Roman">
<p><font face="Times New Roman" size="3" color="#000000">
После завершения распаковки остаются
файлы с расширением *.tar.
</font></p>
</font>
<ol start=2>
<font face="Times New Roman">
<li><font face="Times New Roman" size="3" color="#000000">
 Извлеките файлы поставки из архивов:
</font></li>
  </ol>
</font>
<blockquote>
<p><font face="Courier New" size="3" color="#000000">
 tar -zxvf
apache_1.3.x.tar
</font></p>
<p><font face="Courier New" size="3" color="#000000">
tar -zxvf php-4.0.x.tar
</font></p>
</blockquote>
<font face="Times New Roman">
<p><font face="Times New Roman" size="3" color="#000000">
С этого момента начинается основной
процесс установки.
</font></p>
<b>
<p><font face="Times New Roman" COLOR="#000000" size="3">
Модуль Apache
</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Установка РНР в виде модуля Apache
выполняется довольно просто. Ниже подробно
описаны все необходимые действия:
</font></p>
<ol>
  <li> <font face="Times New Roman" SIZE="3" COLOR="#000000">
 Перейдите в каталог Apache:
</font></li>
</font>
<p><font color="#000000" face="Courier New" size="3">cd apache_1.3.x</font></p>
<font face="Times New Roman">
  <li> 
<font SIZE="3" COLOR="#000000">
 Настройте Apache. Выберите путь по своему
усмотрению, но помните, что за ним </font><i><font FACE="Times New Roman" SIZE="3" COLOR="#000000">не
должна </font></i><font SIZE="3" COLOR="#000000">следовать
косая черта:
</font></li>
</font>
<p><font color="#000000" face="Courier New" size="3">./configure -prefix=[путь]</font></p>
<font face="Times New Roman">
  <li> 
<font face="Times New Roman" SIZE="3" COLOR="#000000">
 Перейдите в каталог РНР; настройте,
соберите и установите поставку. Параметр -with-config-file-path
задает каталог, в котором будет находиться
файл конфигурации РНР. Обычно этот файл
находится в каталоге /usr/local/lib, но вы можете
выбрать другой каталог по своему
усмотрению:
</font></li>
</font>
<p><font color="#000000" face="Courier New" size="3">./configure -with-apache=../apache_1.3.x
-with-config-file-path=[путь]</font></p>
<p><font color="#000000" face="Courier New" size="3">make</font></p>
<p><font face="Courier New" COLOR="#000000" size="3">
make install
</font></p>
<font face="Times New Roman">
  <li> 
<font face="Times New Roman" SIZE="3" COLOR="#000000">
 Вернитесь в каталог Apache. Теперь вы
можете изменить конфигурацию, собрать и
установить Apache. Параметр -other-configuration-options
относится к любым специальным параметрам
конфигурации, которые вы хотели бы передать
web-серверу Apache. Данная тема выходит за рамки
книги. Полное описание параметров
приведено в документации Apache:
</font></li>
</font>
<p><font color="#000000" face="Courier New" size="3">./configure -activate-module=src/modules/php4/libphp4.a</font></p>
<p><font color="#000000" face="Courier New" size="3">-other-configuration-options</font></p>
<p><font color="#000000" face="Courier New" size="3">make</font></p>
<p><font face="Courier New" COLOR="#000000" size="3">
make install
</font></p>
<font face="Times New Roman">
  <li> 
<font face="Times New Roman" SIZE="3" COLOR="#000000">
 На последнем этапе происходит
редактирование файла Apache httpd.conf. Одни
модификации относятся к Apache, другие
необходимы для того, чтобы сценарии РНР
распознавались и передавались web-серверу.
Сначала найдите такую строку:
</font></li>
</ol>
</font>
<blockquote>
<p>
<font face="Courier New" SIZE="3" COLOR="#000000">
  ServerName new.host.name
</font></p>
</blockquote>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Приведите ее к следующему
виду:
</font></p>
</font>
<p>
<font face="Courier New" size="3" COLOR="#000000">
  ServerName localhost
</font></p>
<p>
<font face="Courier New" size="3" COLOR="#000000">
Затем найдите строки
</font>
</p>
<p><font color="#000000" size="3" face="Courier New">#AddType application/x-httpd-php
.php .php4</font></p>
<p><font color="#000000" size="3" face="Courier New">#AddType application/x-httpd-php-source
.php .phps</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Чтобы файлы с поддержкой РНР правильно
работали на сервере, эти строки необходимо
раскомментировать. Для этого достаточно
удалить знак фунта (#) в начале каждой строки.
Сохраните файл и поднимитесь в иерархии
каталогов на один уровень вверх. Запустите
сервер Apache следующей командой:
</font></p>
</font>
<p><font color="#000000" face="Courier New" size="3">./bin/apachectl start</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Voila! PHP и Apache готовы к работе. Для проверки
сохраните приведенный ниже фрагмент в
файле phpinfo.php в корневом каталоге документов
Apache — каталоге htdocs, находящемся в
установочном каталоге Apache:
</font>
</p>
<p><font face="Courier New" SIZE="3" COLOR="#000000">
&lt;?
</font></p>
<p><font color="#000000" face="Courier New" size="3">php info();</font></p>
<p><font color="#000000" face="Courier New" size="3">?&gt;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Откройте файл в браузере на сервере. В
окне появляется длинный перечень сведений
о конфигурации РНР. Вы успешно установили
РНР в виде модуля Apache.
</font></p>
<b>
<p><font face="Times New Roman" COLOR="#000000" size="3">
Динамический модуль Apache
</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Динамические модули удобны тем, что они
позволяют обновлять поставку РНР без
перекомпиляции web-сервера. Apache
рассматривает поддержку РНР как один
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
из своих многочисленных модулей вроде
ModuleRewrite или ModuleSpelling. Этот вариант особенно
хорош в ситуациях, когда в РНР позднее будет
добавляться поддержка новых возможностей
— например, шифрования. Все, что вам
придется сделать — переконфигурировать/откомпилировать
РНР с поддержкой шифрования, и вы сможете
немедленно использовать новую возможность
в web-приложениях. Процесс установки описан
ниже:
</font></p>
<ol>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Перейдите в каталог Apache:
</font></li>
</ol>
</font>
<blockquote>
  <p><font color="#000000" face="Courier New" size="3">cd apache_1.3.x</font></p>
</blockquote>
<font face="Times New Roman">
<ol start=2>
  <li>
<font SIZE="3" COLOR="#000000">Настройте Apache. Выберите путь по своему
усмотрению, но помните, что за ним </font><i><font FACE="Times New Roman" SIZE="3" COLOR="#000000">не
должна </font></i><font SIZE="3" COLOR="#000000">следовать
косая черта. Параметр -other-configuration-options
относится к любым специальным параметрам
конфигурации, которые вы хотели бы передать
web-серверу Apache. Данная тема выходит за рамки
книги. Полное описание параметров
приведено в документации Apache.
</font></li>
</ol>
</font>
<blockquote>
  <p><font color="#000000" face="Courier New" size="3">./configure -prefix=[путь]
-enable-module=so -other-configuration-options</font></p>
</blockquote>
<font face="Times New Roman">
<ol start=3>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">Соберите сервер Apache. После ввода команды
make на экран выводится серия сообщений:
</font></li>
</ol>
</font>
<blockquote>
  <p><font color="#000000" size="3" face="Courier New">make</font></p>
</blockquote>
<font face="Times New Roman">
<ol start=4>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">Установите сервер Apache. После ввода
команды make install на экран выводится
следующая серия сообщений. После успешного
завершения установки на экране появляется
соответствующее сообщение:
</font></li>
</ol>
</font>
<blockquote>
  <p><font color="#000000" face="Courier New" size="3">make install</font></p>
</blockquote>
<font face="Times New Roman">
<ol start=5>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">Если предыдущие действия прошли без
ошибок, можно переходить к редактированию
файла httpd.conf. Этот файл находится в
подкаталоге conf каталога, указанного на шаге
2. Откройте файл в текстовом редакторе и
найдите строку
</font></li>
</ol>
<blockquote>
  <p>
</font>
<font face="Courier New" SIZE="3" COLOR="#000000">
ServerName new.host.name
</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Приведите ее к следующему
виду:
</font></p>
</font>
<p>
<font face="Courier New" SIZE="3" COLOR="#000000">
ServerName local host
</font></p>
</blockquote>
<font face="Times New Roman">
<ol start=6>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">Перейдите в тот каталог, где находится
пакет РНР. Настройте, соберите и установите
РНР. В параметрах указывается путь к
каталогу, содержащему файл apxs, —
подкаталогу bin каталога, путь к которому был
указан на шаге 2:
</font></li>
</ol>
</font>
<blockquote>
  <p><font face="Courier New" size="3" color="#000000">
./configure -with-apxs=[путь/k/apxs]
</font></p>
  <p><font face="Courier New" size="3" color="#000000">
make
</font></p>
  <p><font face="Courier New" size="3" color="#000000">
make install
</font></p>
</blockquote>
<font face="Times New Roman">
<ol start=7>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">Откройте файл Apache httpd.conf для очередной
модификации. Для обеспечения правильного
лексического анализа входящих запросов на
файлы с поддержкой РНР расширение должно
совпадать с одним из расширений, указанных
в файле конфигурации сервера Apache, httpd.conf.
Файл содержит параметры, которые могут
изменяться по усмотрению администратора;
некоторые из них имеют прямое отношение к
РНР. Откройте файл httpd.conf в своем текстовом
редакторе. В конце файла присутствуют две
строки следующего вида:
</font></li>
</ol>
</font>
<blockquote>
  <p><font color="#000000" size="3" face="Courier New">#AddType application/x-httpd-php
  .php .php4</font></p>
  <p><font color="#000000" size="3" face="Courier New">#AddType application/x-httpd-php-source .php .phps</font></p>
</blockquote>
<ol start=8>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">Чтобы файлы с поддержкой РНР правильно
работали на сервере, эти строки необходимо
раскомментировать. Для этого следует
удалить'знак фунта (#) в начале каждой строки.
</font>
  </li>
<font face="Times New Roman">
<li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">Сохраните файл и перейдите на один
уровень вверх в иерархии каталогов (командой
cd). Запустите Apache следующей командой:
</font>
</li>
  </ol>
</font>
<blockquote>
<p><font face="Courier New" SIZE="3" COLOR="#000000">
./bin/apachectl start
</font></p>
</blockquote>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Voila! РНР и Apache готовы к работе.
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Для проверки сохраните приведенный ниже
фрагмент в файле phpinfo.php в корневом каталоге
документов Apache — каталоге htdocs, находящемся
в установочном каталоге Apache:
</font></p>
</font>
<p><font face="Courier New" size="3" color="#000000">
&lt;?
</font></p>
<p><font face="Courier New" size="3" color="#000000">
php_info():&nbsp;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
 ?&gt;
</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Откройте файл в браузере на сервере. В
окне появляется длинный перечень сведений
о конфигурации РНР. Вы успешно установили
РНР в виде динамического модуля Apache.
</font></p>
<p><A NAME="o"></A><font color="#000000" size="4">Установка в Windows 95/98/NT</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Если вам когда-нибудь приходилось
устанавливать новые приложения в
операционной системе Windows, вероятно, это не
вызывало у вас особых трудностей. Вы
щелкаете на нескольких кнопках, отвечаете
на несколько вопросов — и все готово. Так же
обстоит дело и с установкой Apache и РНР на
компьютерах с системой Windows.</font></p>
<ol>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Дважды щелкните на значке исполняемого
файла Apache. Запускается процесс установки, и
на экране появляется начальное окно
программ мастера (wizard) установки.
Внимательно прочитайте текст
лицензионного соглашения и подтвердите его.</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Мастер запрашивает каталог для
установки и предлагает вариант по
умолчанию (C:\Program Files\Apache Group\Apache). Возможно,
вам захочется сократить его до C:\Apache —
решайте сами.</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Затем вам будет предложено указать имя,
под которым программа будет находиться в
меню Пуск (Start). Введите имя по своему
усмотрению или подтвердите предложенный
вариант.</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Следующий вопрос относится к типу
установки. Выберите вариант Typical (Стандартная
установка). После того как решение будет
принято, выполняется установка.</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">На следующем шаге редактируется файл
httpd.conf, находящийся в подкаталоге conf
каталога, указанного на шаге 2. Откройте
файл в текстовом редакторе и найдите строку
ServerAdmin yourname@yoursite.c</font></font>om</li>
</ol>
<font face="Times New Roman">
<blockquote>
  <p><font SIZE="3" COLOR="#000000">Замените yourname@yoursite.com правильными данными.
Затем укажите правильное имя сервера (если</font><font size="3"><font COLOR="#000000">
его нет, воспользуйтесь именем localhost):</font></font></p>
</font>
<p><font face="Courier New"><font color="#000000" size="3">S</font><font size="3" COLOR="#000000">erverName localhost
</font></font></p>
</blockquote>
<font face="Times New Roman">
<ol start=6>
  <li ><font face="Times New Roman" size="3" COLOR="#000000">Запустите
    Apache и убедитесь в том, что все
работает правильно. Конкретные</font></font> <font face="Times New Roman" SIZE="3" COLOR="#000000">
действия зависят от того, в какой системе
вы работаете.
</font>
</li>
</ol>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Если вы используете Windows NT, выберите в меню
Пуск (Start) команду Install Apache as Service (NT Only). Затем
вызовите панель управления, откройте окно
Службы (Services), выберите Apache и щелкните на
кнопке Пуск (Start). Apache запускается и будет
запускаться автоматически при каждой
последующей загрузке системы.
</font>
</p>
<ol start=7>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Запустите браузер, установленный на
сервере, и введите адрес http: /local host/. В окне
открывается страница с сообщением о том,
что установка была выполнена успешно.
</font>
    <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Следующий этап — установка РНР.
Перейдите в каталог, где находится пакет
РНР, и распакуйте его в произвольный
каталог.
</font>
    <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Перейдите в каталог, в который были
помещены распакованные файлы, и найдите в
нем файл php.ini-dist. Переименуйте его в php.ini и
переместите в каталог C:\Windows.
</font>
  </li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Вернитесь в каталог РНР и найдите два
других файла, php4ts.dll и Mscvrt.dll. Поместите эти
файлы в каталог C:\Windows\System\. Возможно, файл
Mscvrt.dll уже существует — если вам будет
предложено его перезаписать, не
соглашайтесь.
</font>
  </li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">Вернитесь к файлу Apache http.conf и откройте
его в текстовом редакторе. Необходимо
внести еще несколько изменений. Найдите
строку
</font>
  </li>
</ol>
</font>
<blockquote>
<p><font color="#000000" size="3" face="Courier New">ScriptAlias /cgi-bin/ &quot;C:/Apache/cgi-bin/&quot;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Непосредственно под этой строкой введите
следующую:
</font></p>
</font>
<p><font color="#000000" size="3" face="Courier New">ScriptAlias /php4/ &quot;C:/php4/&quot;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Найдите секцию AddType. Вы увидите две
закомментированные строки:
</font></p>
</font>
<p><font color="#000000" face="Courier New" size="3">#AddType application/x-httpd-php3. phtml</font></p>
<p><font color="#000000" face="Courier New" size="3">#AddType application/x-httpd-php3-source
.phps</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Непосредственно под этими строками
добавьте следующие:
</font></p>
</font>
<p><font color="#000000" size="3" face="Courier New">AddType application/x-httpd-php
.phtml .php&nbsp;</font></p>
<p><font color="#000000" size="3" face="Courier New"> AddType application/x-httpd-php-source .phps</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Прокрутите содержимое файла и найдите
следующий закомментированный фрагмент:
</font></p>
</font>
<p><font color="#000000" face="Courier New" size="3">#</font></p>
<p><font color="#000000" face="Courier New" size="3"># Action lets you define media types that will execute a script whenever</font></p>
<p><font color="#000000" face="Courier New" size="3"># a matching file is called. This eliminates the need for repeated URL</font></p>
<p><font color="#000000" face="Courier New" size="3"># pathnames for oft-used CGI file
processors.</font></p>
<p><font color="#000000" face="Courier New" size="3"># Format: Action media/type
/cgi-script/location</font></p>
<p><font color="#000000" face="Courier New" size="3"># Format: Action handler-name
/cgi-script/location&nbsp;</font></p>
<p><font color="#000000" face="Courier New" size="3"> #</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Добавьте под этим фрагментом следующую
строку:
</font></p>
<p><font color="#000000" face="Courier New" size="3">Action application/x-httpd-php
/php4/php.exe</font></p>
</blockquote>
<font face="Times New Roman">
<ol start=12>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">РНР и Apache готовы к работе.
</font></li>
</ol>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Для проверки сохраните приведенный ниже
фрагмент в файле phpinfo.php в корневом каталоге
документов Apache — каталоге htdocs. Он находится
в том каталоге, который был указан на шаге 2:
</font></p>
</font>
<p>
<font face="Courier New" SIZE="3" COLOR="#000000">
&lt;?
</font></p>
<p><font color="#000000" size="3" face="Courier New">php_info();</font></p>
<p><font color="#000000" size="3" face="Courier New">?&gt;</font></p>
<p><i><font face="Times New Roman" color="#000000" size="3"> <img border="0" src="attent.gif" align=left width="36" height="35">Хотя
при успешном завершении действий,
описанных выше, вы сможете использовать web-сервер
и РНР для тестирования, это еще не значит,
что ваш web-сервер будет доступен из World Wide Web.
За информацией по этому вопросу
обращайтесь&nbsp; на официальный сайт Apache (<a href="http://www.apache.org">http://www.apache.org</a>).
Более того, хотя описанная процедура
позволяет работать с пакетом РНР, вероятно,
вы захотите изменить конфигурацию РНР так,
чтобы она лучше соответствовала вашим
потребностям. Эта тема рассматривается в
следующем разделе «Конфигурация РНР».</font></i></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Откройте файл в браузере на сервере — в
окне появляется длинный перечень сведений
о конфигурации РНР.
</font></p>
<b>
<p>
</b>
</font><b>
<A NAME="p"></A><font face="Times New Roman" color="#000000" size="4">Конфигурация РНР</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
РНР будет правильно работать и при
конфигурации, выбранной по умолчанию,
однако вы можете внести некоторые
изменения, чтобы работа пакета лучше
соответствовала вашим целям. Все параметры
конфигурации находятся в файле php.ini,
который по умолчанию копируется в каталог /usr/local/lib/
в процессе установки.
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Независимо от платформы и web-сервера,
используемого в сочетании с РНР, файл php.ini
содержит одинаковый набор стандартных
параметров, позволяющих управлять важными
аспектами работы РНР. Этот файл содержит
все параметры, определяющие поведение
пакета при выполнении сценария РНР.
Содержимое файла php.ini читается при запуске
РНР.
</font></p>
<b>
<p><img border="0" src="prim.gif" align=left width="36" height="35"></b></font><i><font face="Times New Roman" color="#000000" size="3">В
версии 3.0 файл конфигурации назывался php3.ini,
но в версии 4.0 ему было присвоено имя php.ini.</font></i></p>
<p>&nbsp;</p>
<p><A NAME="q"></A><font face="Times New Roman" color="#000000" size="4">Общие параметры конфигурации</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Подробное описание всех конфигурационных
параметров выходит за рамки этой книги, но
некоторые директивы используются особенно
часто и заслуживают отдельного упоминания.
Другие параметры упоминаются в
соответствующих местах следующих глав.
</font></p>
<b>
<p><font face="Times New Roman" COLOR="#000000" size="3">
short_open_tag [on | off]
</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр short_open_tab [on | off] определяет
возможность использования коротких тегов
&lt;?...?&gt; наряду со стандартными тегами.
</font></p>
<b>
<p><font color="#000000" size="3" face="Times New Roman">asp_tags [on | off]</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр asp_tags [on | off] определяет
возможность использования тегов в стиле ASP
наряду со стандартными тегами. При
использовании тегов в стиле ASP фрагменты
кода РНР оформляются следующим образом:
</font></p>
</font>
<p><font color="#000000" size="3" face="Courier New">&lt;%</font></p>
<p><font color="#000000" size="3" face="Courier New">print &quot;This is РНР code.&quot;;</font></p>
<p><font color="#000000" size="3" face="Courier New">%&gt;</font></p>
<b>
<p><font color="#000000" size="3" face="Times New Roman">precision [integer]</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр precision [integer] задает количество
значащих цифр, отображаемых в вещественных
числах.
</font></p>
</font><b>
<p><font color="#000000" size="3" face="Times New Roman">safe_mode [on | off]</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Безопасный режим особенно удобен в случае,
если в вашей системе работают несколько
пользователей. Включение безопасного
режима гарантирует, что пользователь не
сможет применить сценарий РНР для
получения доступа к другому файлу в системе
— например, файлу passwd на компьютере Linux.
Параметр safe_mode работает только в CGI-версии
РНР. За дополнительной информацией по этой
теме обращайтесь к главе 16.
</font></p>
</font><b>
<p><font color="#000000" size="3" face="Times New Roman">max_execution_time [integer]</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр max_execution_time [integer] определяет
максимальную продолжительность выполнения
сценариев РНР в секундах. Такое ограничение
предотвращает поглощение ценных системных
ресурсов сценариями, содержащими ошибки.
</font></p>
</font><b>
<p><font color="#000000" size="3" face="Times New Roman">error_reporting [1-8]</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр error_reporting [1-8] определяет уровень
выдачи сообщений об ошибках в РНР. Чем выше
значение, тем «чувствительнее» РНР
реагирует на ошибки.
</font>
</p>
<table border="1" width="350" cellspacing="0" cellpadding="0">
  <tr>
    <td width="23%" align="center">
<b><font face="Times New Roman" SIZE="3" COLOR="#000000">
Значение
</font></b>
    </td>
    <td width="77%" align="center">
<b><font face="Times New Roman" SIZE="3" COLOR="#000000">
Чувствительность
</font></b>
    </td>
  </tr>
</font>
<tr>
  <td width="23%" align="center"><font face="Times New Roman" SIZE="3" COLOR="#000000">
1
</font></td>
  <td width="77%"><font color="#000000" size="3" face="Times New Roman"> Обычные ошибки</font></td>
</tr>
<font face="Times New Roman">
<tr>
  <td width="23%" align="center"><font face="Times New Roman" size="3" COLOR="#000000">
2
</font></td>
  <td width="77%"><font face="Times New Roman" size="3" COLOR="#000000">Обычные предупреждения
</font></td>
</tr>
<tr>
  <td width="23%" align="center"><font color="#000000" size="3" face="Times New Roman">4</font></td>
  <td width="77%"><font face="Times New Roman" size="3" COLOR="#000000">Ошибки лексического анализатора
</font></td>
</tr>
<tr>
  <td width="23%" align="center"><font color="#000000" size="3" face="Times New Roman">8</font></td>
  <td width="77%"><font face="Times New Roman" size="3" COLOR="#000000">Замечания
</font></td>
</tr>
</table>
<b>
<p><font color="#000000" size="3" face="Times New Roman">display_errors [on | off]</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр display_errors[on | off] управляет выводом
информации об ошибках в браузере.
</font></p>
<b>
<p><font color="#000000" size="3" face="Times New Roman">log_errors</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр log_errors определяет, следует ли
регистрировать ошибки в файле. При
включении параметра log_errors файл, в котором
регистрируются ошибки, назначается при
помощи параметра error_log.
</font></p>
<b>
<p><font color="#000000" size="3" face="Times New Roman">error_log [filename]</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр error_log определяет файл, в котором
регистрируются ошибки при включенном
параметре log_errors.
</font></p>
</font><b>
<p><font color="#000000" size="3" face="Times New Roman">magic_quotes_gpc</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
При активизации параметра magic_quotes_gpc все
специальные символы, содержащиеся в
пользовательских данных или в базе,
автоматически экранируются обратной косой
чертой. Кстати, сокращение gрс означает «get/post/cookie».
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Лично я считаю, что параметр magic_quotes_gpc
эффективнее отключить и использовать явное
экранирование специальных символов. Какой
бы способ вы ни выбрали, любые компромиссы
приведут к порче данных. Если параметр
magic_quotes_gpc
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
включен, никогда не экранируйте
специальные символы обратной косой чертой;
в противном случае не забывайте делать это
всегда.
</font></p>
<b>
<p><font face="Times New Roman" COLOR="#000000" size="3">
track_vars
</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Параметр track_vars включает отслеживание
нескольких важных массивов сеансовых
переменных, в том числе $HTTP_GET_VARS[], $HTTP_POST_VARS[],
$HTTP_POST_FILES, $HTTP_COOKIE_VARS[], $HTTP_ENV_VARS[] и $HTTP_SERVER_VARS[].
Эти массивы подробно описаны в главе 13.
</font></p>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Помните, что кроме перечисленных
параметров существует множество других.
Выше перечислены лишь те параметры, которые
часто применяются большинством
пользователей. Многие параметры будут
упоминаться в последующих главах.
</font></p>
<b>
<p>
</b>
</font><b>
<A NAME="r"></A><font face="Times New Roman" color="#000000" size="4">Основные конструкции РНР</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Прежде чем переходить к изложению
основного материала, занимающего
оставшуюся часть книги, я представлю
несколько вспомогательных концепций,
относящихся к РНР.
</font></p>
<b>
<p>
</b>
</font>
<A NAME="s"></A><font face="Times New Roman" color="#000000" size="4">Переход в РНР</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Механизм лексического анализа должен как-то
отличать код РНР от других элементов
страницы. Идентификация кода РНР
называется «переходом в РНР» (escaping to РНР).
Существуют четыре варианта оформления
перехода в РНР:
</font></p>
<ul>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
стандартные теги;
</font></li>
  <li>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
короткие теги;
</font></li>
  <li><font color="#000000" size="3">
теги script;</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
теги в стиле ASP.
</font></li>
</ul>
<b>
<p>
</b>
</font><b>
<font face="Times New Roman" color="#000000" size="3">Стандартные теги</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Стандартные теги используются
программистами РНР чаще остальных способов,
что объясняется наглядностью и удобством
этой формы записи:
</font></p>
</font>
<p><font color="#000000" size="3" face="Courier New">
&lt;?php print &quot;Welcome to the world of PHP!&quot;: ?&gt;</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
У стандартных тегов есть еще одно
дополнительное преимущество: за
открывающей конструкцией &lt;? следуют
символы php, однозначно определяющие тип
дальнейшего кода. Это удобно при
использовании в одной странице нескольких
технологий — таких, как JavaScript, серверные
включения и РНР. Весь текст, расположенный
до закрывающего тега ?&gt;, интерпретируется
как код РНР.
</font></p>
<b>
<p>
</b>
</font><b>
<font color="#000000" size="3" face="Times New Roman">Короткие теги</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Короткие теги обеспечивают наиболее
компактную запись для перехода в РНР:
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
&lt;? print
&quot;Welcome to the world of PHP!&quot;; ?&gt;
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
По умолчанию короткие теги не
используются, их нужно специально
активизировать. Это можно сделать двумя
способами:
</font></p>
<ul>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">указать ключ -enable-short-tags при компиляции
РНР;
</font></li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">включить параметр short_open_tag в файл php.ini.
</font></li>
</ul>
<b>
<p>
</b>
</font><b>
<font color="#000000" size="3" face="Times New Roman">Теги script</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Некоторые текстовые редакторы ошибочно
принимают код РНР за код HTML (то есть
визуально отображаемый текст), что нарушает
работу над web-страницей. Проблема решается
использованием тегов script:
</font></p>
</font>
<p><font color="#000000" face="Courier New" size="3">&lt;script language=&quot;php&quot;&gt;</font></p>
<p><font color="#000000" face="Courier New" size="3">&lt;?php print &quot;Welcome to the world of PHP!&quot;; ?&gt;</font></p>
<p><font color="#000000" face="Courier New" size="3">&lt;/script&gt;</font></p>
<b>
<p><font face="Times New Roman" color="#000000" size="3">Теги в стиле ASP</font></p>
</b>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Четвертый и последний способ оформления
внедренного кода РНР — теги в стиле ASP (Active
Server Page). Они похожи на короткие теги,
описанные выше, однако вместо
вопросительного знака используется знак
процента (%):
</font></p>
</font>
<p><font color="#000000" size="3" face="Courier New">&lt;%php print &quot;Welcome to the world of PHP!&quot;; %&gt;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
У тегов в стиле ASP есть одна особенность,
делающая запись более компактной. Во
внедренный код РНР не обязательно включать
команду print — знак равенства (=),
расположенный сразу же после открывающего
тега в стиле ASP, приказывает лексическому
механизму РНР вывести значение указанной
переменной:
</font></p>
</font>
<p><font face="Courier New" COLOR="#000000">
&lt;%=$variable %&gt;
</font></p>
<font face="Times New Roman">
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Этот удобный стиль позволяет
использовать в страницах фрагменты вида
</font>
</p>
</font>
<p><font color="#000000" size="3" face="Courier New">&lt;%</font></p>
<p><font color="#000000" size="3" face="Courier New">// Присвоить значение переменной $recipe</font></p>
<p><font color="#000000" size="3" face="Courier New">$recipe = &quot;Lasagna&quot;:</font></p>
<p><font color="#000000" size="3" face="Courier New">%&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">Luigi's favorite recipe is &lt;%=$recipe;%&gt;</font></p>
<font face="Times New Roman">
<p>
<font SIZE="3" COLOR="#000000">
Этот фрагмент содержит два разных
сценария РНР. В первом сценарии переменной $recipe
присваивается значение &quot;Lasagna&quot;. Позднее,
когда потребуется вывес</font><font face="Times New Roman" SIZE="3" COLOR="#000000">ти значение $гесiре, специально для этой
цели используются теги в стиле ASP. Кстати,
такая возможность существует и для
коротких тегов (&lt;?...?&gt;).
</font></p>
<b>
<p>
</b>
</font>
<A NAME="t"></A><font face="Times New Roman" color="#000000" size="4">Внедрение HTML в код РНР</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Одной из самых замечательных
особенностей HTML является простота
использования в сочетании с другими
языками — например, HTML и JavaScript (см. листинг
1.2).
</font></p>
<b>
<p></b></font><b><font face="Times New Roman"><font color="#000000" size="3"><i>Листинг 1.2.
</i>
</font></font></b><i><font color="#000000" size="3">Вывод
кода HTML средствами РНР</font></i></p>
<p><font face="Courier New" color="#000000" size="3">&lt;html&gt;</font></p>
<p><font face="Courier New" color="#000000" size="3">&lt;head&gt;</font></p>
<p><font face="Courier New" color="#000000" size="3">&lt;title&gt;Basic PHP/HTML integration&lt;/title&gt;</font></p>
<p><font face="Courier New" color="#000000" size="3">&lt;/head&gt;</font></p>
<p><font face="Courier New" color="#000000" size="3">&lt;body&gt;</font></p>
<p><font face="Courier New" color="#000000" size="3">&lt;?</font></p>
<p><font face="Courier New" color="#000000" size="3">// Обратите внимание на присутствие тегов
HTML в команде print.</font></p>
<p><font face="Courier New" color="#000000" size="3">print &quot;&lt;h3&gt;PHP/HTML integration is cool.&lt;/h3&gt;&quot;;</font></p>
<p><font face="Courier New" color="#000000" size="3">?&gt;</font></p>
<p><font face="Courier New" color="#000000" size="3">&lt;/body&gt;</font></p>
<p><font face="Courier New" color="#000000" size="3">&lt;/html&gt;</font></p>
<p><img border="0" src="1.2.jpg" width="495" height="25"></p>
<b>
<p><font face="Times New Roman"><font color="#000000" size="3"><i>Рис. 1.2. </i> </font></font></b><i><font face="Times New Roman" color="#000000" size="3">Форматирование
даты с использованием функции РНР date()</font></i></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
В листинге 1.2 показано, как код HTML
интегрируется прямо в команды РНР. В данном
примере в код РНР включаются теги заголовка
третьего уровня (&lt;h3&gt;...&lt;/h3&gt;). В итоговом
документе эти теги ничем не отличаются от
обычного кода HTML.
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
В листинге 1.3 продемонстрировано
включение динамической информации в web-страницу
на примере вывода текущей даты в заголовке
окна (рис. 1.2).
</font></p>
<b>
<p></b></font><b><font face="Times New Roman"><font color="#000000" size="3"><i>Листинг 1.3.
</i>
</font></font></b><i><font face="Times New Roman" color="#000000" size="3">Динамический
вывод даты</font></i></p>
<p><font color="#000000" face="Courier New" size="3">&lt;title&gt;PHP Recipes | &lt;? print (date(&quot;F d, Y&quot;)); ?&gt;&lt;/title&gt;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Простая функция РНР date() форматирует дату
одним из нескольких стандартных способов.
Отформатированная дата вставляется в
заголовок окна.
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
РНР также позволяет изменять формат
конструкций HTML — для этого соответствующая
характеристика тега присваивается
переменной, вставляемой в файл. В листинге
1.4 эта возможность продемонстрирована на
примере присваивания характеристики
шрифта (h3) переменной $big_font и ее
последующего использования при выводе
текста.
</font></p>
<b>
<p></b></font><b><font face="Times New Roman"><font color="#000000" size="3"><i>Листинг 1.4.
</i>
</font></font></b><i><font color="#000000" size="3" face="Times New Roman">Динамические
теги HTML</font></i></p>
<p><font color="#000000" size="3" face="Courier New">&lt;html&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;head&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;title&gt;PHP Recipes | &lt;? print (date(&quot;F
d, Y&quot;)); ?&gt;&lt;/title&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;/head&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;?</font></p>
<p><font color="#000000" size="3" face="Courier New">$big_font = &quot;h3&quot;;</font></p>
<p><font color="#000000" size="3" face="Courier New">?&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;body&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;? print &quot;&lt;$big_font&gt;PHP Recipes&lt;/$big_font&gt;&quot;; ?&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;/body&gt;</font></p>
<p><font color="#000000" size="3" face="Courier New">&lt;/html&gt;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Листинг 1.4 представляет собой
разновидность листинга 1.3 — на этот раз тег
заголовка (&lt;h3&gt;...&lt;/h3&gt;) сначала
присваивается переменной, а затем эта
переменная используется в команде print. В
итоговом документе эти теги ничем не
отличаются от обычного кода HTML.
</font></p>
<b>
<p>
</b>
</font>
<A NAME="u"></A><font face="Times New Roman" color="#000000" size="4">Включение нескольких сценариев РНР</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Для обеспечения необходимой гибкости при
построении динамических web-приложений
можно внедрить в страницу несколько
сценариев РНР (листинг 1.5).
</font></p>
<b>
<p></b></font><b><font face="Times New Roman"><font color="#000000" size="3"><i>Листинг 1.5.
</i>
</font></font></b><i><font face="Times New Roman" color="#000000" size="3">Включение
нескольких сценариев РНР в один документ</font></i></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;html&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;head&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;title&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;?
</font></p>
<p><font face="Courier New" size="3" color="#000000">
print &quot;Another PHP-enabled page&quot;;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
Svariable = &quot;Hello World!&quot;;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
?&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;/title&gt;&lt;/head&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;body&gt;
</font></p>
<p><font face="Courier New" size="3" color="#000000">
&lt;? print Svariable; ?&gt;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
&lt;/body&gt;
</font></p>
<p><font face="Courier New" color="#000000" size="3">
&lt;/html&gt;
</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Листинг 1.5 начинается как типичная (пусть
несколько упрощенная) страница
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
HTML. При внедрении нескольких сценариев
переменные, значения которых были
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
присвоены в одном сценарии, могут
использоваться в другом сценарии той же
</font></p>
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
страницы.
</font></p>
<b>
<p>
</b>
</font>
<A NAME="v"></A><font face="Times New Roman" color="#000000" size="4">Комментарии в коде РНР</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Комментарии следует использовать даже в
относительно простых и незамысловатых
сценариях. В РНР существуют два формата
комментариев: </font></p>
<ul>
  <li> <i><font SIZE="3" COLOR="#000000">Однострочные
комментарии </font></i><font SIZE="3" COLOR="#000000">обычно
используются для коротких пояснений или
примечаний, относящихся к локальному коду. </font></li>
  <li> <i><font SIZE="3" COLOR="#000000">Многострочные
комментарии </font></i><font SIZE="3" COLOR="#000000">обычно
используются при оформлении алгоритмов на
псевдокоде и в более подробных объяснениях.
</font></li>
</ul>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">Оба способа в конечном счете приводят к
одинаковому результату и совершенно не
влияют на общее быстродействие сценария.
Выбор варианта остается за вами.
</font></p>
<b>
<p><font face="Times New Roman" COLOR="#000000">
Однострочные комментарии
</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
При оформлении однострочных комментариев
используется два стиля комментирования.
Оба стиля работают абсолютно одинаково, но
в них используются разные служебные
символы. В одном случае комментарий
начинается с двойного символа «косая черта»
(//), а в другом — с символа фунта (#). Ниже
приведены примеры обоих стилей:
</font></p>
</font>
<p><font color="#000000" face="Courier New" size="3">&lt;?</font></p>
<p><font color="#000000" face="Courier New" size="3">// Выбрать цвет роз $rose_color = &quot;red&quot;;</font></p>
<p><font color="#000000" face="Courier New" size="3"># Выбрать цвет фиалок $violet_color = &quot;blue&quot;;</font></p>
<p><font color="#000000" face="Courier New" size="3">print &quot;Roses are
$rose_color,</font> <font color="#000000" face="Courier New" size="3">violets are $violet_color&quot;</font></p>
<p><font color="#000000" face="Courier New" size="3">?&gt;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Конечно, оба стиля однострочных
комментариев могут применяться для
построения искусственных многострочных
комментариев, как показано в следующем
листинге:
</font></p>
</font>
<p><font color="#000000" face="Courier New" size="3">&lt;?</font></p>
<p><font color="#000000" face="Courier New" size="3">// файл: example. php</font></p>
<p><font color="#000000" face="Courier New" size="3">// автор: У.Дж.Гилмор</font></p>
<p><font color="#000000" face="Courier New" size="3">// дата: 24 августа 2000 г.</font></p>
<p><font color="#000000" face="Courier New" size="3">print &quot;An example with comments&quot;;</font></p>
<p><font color="#000000" face="Courier New" size="3">?&gt;</font></p>
<font face="Times New Roman">
<b>
<p><font face="Times New Roman" COLOR="#000000">
Многострочные комментарии
</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
В РНР существует возможность построения
подробных комментариев, занимающих
несколько строк. Такие комментарии
оформляются в стиле языка С — их начало и
конец обозначаются символами /* и */.
</font></p>
</font>
<p><font face="Courier New" SIZE="3" COLOR="#000000">
&lt;?
</font></p>
<p><font color="#000000" size="3" face="Courier New">/*</font></p>
<p><font color="#000000" size="3" face="Courier New">&nbsp; Сценарий: multi_coramment_example.php</font></p>
<p><font color="#000000" size="3" face="Courier New">&nbsp; Назначение : пример использования
многострочных комментариев</font> </p>
<p><font color="#000000" size="3" face="Courier New">&nbsp; Автор: У.Дж.Гилмор</font></p>
<p><font color="#000000" size="3" face="Courier New">&nbsp; Дата: 14 июня 2000 г.</font> </p>
<p><font color="#000000" size="3" face="Courier New">*/</font></p>
<p><font color="#000000" size="3" face="Courier New">print &quot;A multiline comment can be found at the top of this script!&quot;;</font></p>
<p><font color="#000000" size="3" face="Courier New">?&gt;</font></p>
<font face="Times New Roman">
<p>
<font face="Times New Roman" SIZE="3" COLOR="#000000">
Как видите, многострочные комментарии
особенно удобны для вывода относительно
длинной сводной информации обо всем
сценарии или его части.
</font></p>
<b>
<p><A NAME="w"></A><font face="Times New Roman" color="#000000" size="4">Итоги</font></p>
</b>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
В этой главе мы рассмотрели некоторые
ключевые аспекты РНР:
</font>

</p>
<ul>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
историю и особенности РНР;
</font>

  </li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
установку и конфигурацию;
</font>

  </li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
«переход» в РНР;
</font>

  </li>
  <li><font face="Times New Roman" SIZE="3" COLOR="#000000">
комментирование кода РНР.
</font>

  </li>
</ul>
<p><font face="Times New Roman" SIZE="3" COLOR="#000000">
Эти вопросы закладывают основу для
материала следующих глав, в которых будут
более подробно описаны проблемы
программирования на языке РНР. В конце
следующей главы вы будете знать о РНР
достаточно, чтобы писать собственные
программы. Новые знания будут применены на
практике — мы создадим календарь, который
можно будет легко вставить в существующую
web-страницу. Этот проект подготовит вас к
работе над web-приложением РНР Recipes.
</font>

</p>

<p>&nbsp;

</p>

<p>&nbsp;

</p>

<p>&nbsp;

</p>

</BODY></HTML>
