<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0060)http://www.apachedev.ru/modules.php?name=Pages&go=page&pid=6 -->
<HTML><HEAD><TITLE>ApacheDev.ru Написание фильтров для Apache 2.0</TITLE>
<META content="text/html; charset=windows-1251" http-equiv=Content-Type>
<META content=0 http-equiv=EXPIRES>
<META content=DOCUMENT name=RESOURCE-TYPE>
<META content=GLOBAL name=DISTRIBUTION>
<META content=ApacheDev.ru name=AUTHOR>
<META content="Copyright (c) by ApacheDev.ru" name=COPYRIGHT>
<META 
content="Apache, apache, Апач, апач, настройка apache, разработка под apache, модули apache, module, modules, mod, скачать apache, установка apache, php, mysql, настройка сервера apache, http server, ant, cocoon, db, excalibur, forrest, geronimo, gump, incubator, xml, http сервер, http, https, apache download, apache 2.0, asp apache, сервер, server, ssh, документация apache, взлом apache, устройство apache, perl, active perl, apache win32, ssi, apache server, ssl, conf, tomcat, APR, apr, htaccess, opensll, phpmyadmin, php4, mod_perl, httpd, webalizer, webdav, php3, mod_ssl, apache2, activeperl, mod_dav, http, cgi, contents, virtual host, postgresql, redirect, localhost, allow, cocoon, jakarta, deny, 8080, tomcat, mod_gzip, standalone" 
name=KEYWORDS>
<META 
content="Это третья статья из серии Райнa Блума (Ryan Bloom) о Apache 2.0.  Повествует об основах функционирования фильтров в сервере Apache 2.0" 
name=DESCRIPTION>
<META content="INDEX, FOLLOW" name=ROBOTS>
<META content="1 DAYS" name=REVISIT-AFTER>
<META content=GENERAL name=RATING>
<META content="MSHTML 5.00.3700.6699" name=GENERATOR><LINK 
href="ApacheDev_ru Написание фильтров для Apache 2_0.files/style.css" 
rel=StyleSheet type=text/css></HEAD>
<BODY aLink=#d5ae83 bgColor=#ffffff link=#363636 text=#000000 
vLink=#363636><BR><BR>
<TABLE align=center bgColor=#ffffff border=0 cellPadding=0 cellSpacing=0 
width=750>
  <TBODY>
  <TR>
    <TD bgColor=#f3e1af><IMG 
  src="themes/Karate/images/tophighlight.gif"></TD></TR></TBODY></TABLE>
<TABLE align=center bgColor=#ffffff border=0 cellPadding=0 cellSpacing=0 
width=750>
  <TBODY>
  <TR vAlign=center>
    <TD align=left bgColor=#f3e1af width=400>&nbsp;<A 
      href="http://www.apachedev.ru/index.php" 
      style="FONT-SIZE: 12px; FONT-WEIGHT: bold; TEXT-DECORATION: none"><IMG 
      alt="Welcome to ApacheDev.ru!" 
    src="themes/ApacheDev/images/logo.gif"></A></TD></TR></TBODY></TABLE>
<TABLE align=center bgColor=#fefefe border=0 cellPadding=0 cellSpacing=0 
width=750>
  <TBODY>
  <TR>
    <TD bgColor=#000000 colSpan=4><IMG alt="" border=0 height=1 hspace=0 
      src="themes/ApacheDev/images/pixel.gif" width=1></TD></TR>
  <TR bgColor=#efce6b vAlign=center>
    <TD noWrap width="15%">
      <FORM action=modules.php?name=Search method=post><FONT class=content 
      color=#000000><B>&nbsp;Поиск </B><INPUT name=query 
    size=14></FONT></FORM></TD>
    <TD align=middle height=20 width="60%"><FONT class=content>&nbsp; </FONT>
    <TD align=right width="25%"><FONT class=content>
      <SCRIPT type=text/javascript>

<!--   // Array ofmonth Names
var monthNames = new Array( "January","February","March","April","May","June","July","August","September","October","November","December");
var now = new Date();
thisYear = now.getYear();
if(thisYear < 1900) {thisYear += 1900}; // corrections if Y2K display problem
document.write(monthNames[now.getMonth()] + " " + now.getDate() + ", " + thisYear);
// -->

</SCRIPT>
      </FONT></TD>
    <TD>&nbsp;</TD></TR>
  <TR>
    <TD bgColor=#000000 colSpan=4><IMG alt="" border=0 height=1 hspace=0 
      src="themes/ApacheDev/images/pixel.gif" width=1></TD></TR></TBODY></TABLE>
<TABLE align=center bgColor=#ffffff border=0 cellPadding=0 cellSpacing=0 
width=750>
  <TBODY>
  <TR vAlign=top>
    <TD bgColor=#f3e1af><IMG alt="" border=0 height=3 
      src="themes/ApacheDev/images/pixel.gif" width=1></TD></TR>
  <TR vAlign=top>
    <TD bgColor=#ffffff><IMG alt="" border=0 height=5 
      src="themes/ApacheDev/images/pixel.gif" width=1></TD></TR></TBODY></TABLE><BR>
<TABLE align=center bgColor=#ffffff border=0 cellPadding=0 cellSpacing=0 
width=750>
  <TBODY>
  <TR vAlign=top>
    <TD bgColor=#eeeeee vAlign=top width=150>
      <TABLE bgColor=#000000 border=0 cellPadding=1 cellSpacing=0 width=150>
        <TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#f3e1af border=0 cellPadding=3 cellSpacing=0 
            width="100%">
              <TBODY>
              <TR>
                <TD align=left><FONT class=content 
                  color=#363636><B>Навигация</B></FONT> 
        </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <TABLE border=0 cellPadding=3 cellSpacing=0 width=150>
        <TBODY>
        <TR vAlign=top>
          <TD><STRONG><BIG>·</BIG></STRONG> <A 
            href="http://www.apachedev.ru/index.php">Главная</A><BR><STRONG><BIG>·</BIG></STRONG> 
            <A 
            href="http://www.apachedev.ru/modules.php?name=Topics">Новости</A><BR><STRONG><BIG>·</BIG></STRONG> 
            <A 
            href="http://www.apachedev.ru/modules.php?name=Pages">Статьи</A><BR><STRONG><BIG>·</BIG></STRONG> 
            <A href="http://www.apachedev.ru/modules.php?name=Files">Каталог 
            файлов</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
            href="http://www.apachedev.ru/modules.php?name=Web_Links">Ссылки</A><BR><STRONG><BIG>·</BIG></STRONG> 
            <A 
            href="http://www.apachedev.ru/modules.php?name=Search">Поиск</A><BR><STRONG><BIG>·</BIG></STRONG> 
            <A 
            href="http://www.apachedev.ru/modules.php?name=Feedback">Контакт</A> 
          </TD></TR></TBODY></TABLE><BR>
      <TABLE bgColor=#000000 border=0 cellPadding=1 cellSpacing=0 width=150>
        <TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#f3e1af border=0 cellPadding=3 cellSpacing=0 
            width="100%">
              <TBODY>
              <TR>
                <TD align=left><FONT class=content 
                  color=#363636><B>Рекомендуем</B></FONT> 
        </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <TABLE border=0 cellPadding=3 cellSpacing=0 width=150>
        <TBODY>
        <TR vAlign=top>
          <TD>
            <DIV align=center>
            <SCRIPT type=text/javascript><!--
google_ad_client = "pub-1719997141905626";
google_ad_width = 120;
google_ad_height = 240;
google_ad_format = "120x240_as";
google_ad_type = "text";
google_ad_channel ="";
google_color_border = "000000";
google_color_bg = "F0F0F0";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></SCRIPT>

            <SCRIPT 
            src="ApacheDev_ru Написание фильтров для Apache 2_0.files/show_ads.js" 
            type=text/javascript>
</SCRIPT>
            </DIV></TD></TR></TBODY></TABLE><BR>
      <TABLE bgColor=#000000 border=0 cellPadding=1 cellSpacing=0 width=150>
        <TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#f3e1af border=0 cellPadding=3 cellSpacing=0 
            width="100%">
              <TBODY>
              <TR>
                <TD align=left><FONT class=content 
                  color=#363636><B>Правописание</B></FONT> 
          </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <TABLE border=0 cellPadding=3 cellSpacing=0 width=150>
        <TBODY>
        <TR vAlign=top>
          <TD>
            <CENTER><IFRAME frameBorder=0 height=31 id=orphus scrolling=no 
            src="ApacheDev_ru Написание фильтров для Apache 2_0.files/ads.htm" 
            width=88></IFRAME><BR>Выделите в тексте ошибку и нажмите 
            Ctrl+Enter</CENTER></TD></TR></TBODY></TABLE><BR>
      <TABLE bgColor=#000000 border=0 cellPadding=1 cellSpacing=0 width=150>
        <TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#f3e1af border=0 cellPadding=3 cellSpacing=0 
            width="100%">
              <TBODY>
              <TR>
                <TD align=left><FONT class=content 
                  color=#363636><B>Статистика</B></FONT> 
        </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <TABLE border=0 cellPadding=3 cellSpacing=0 width=150>
        <TBODY>
        <TR vAlign=top>
          <TD>
            <DIV align=center><!-- SpyLOG f:0211 -->
            <SCRIPT language=javascript><!--
Md=document;Mnv=navigator;Mp=1;
Mn=(Mnv.appName.substring(0,2)=="Mi")?0:1;Mrn=Math.random();
Mt=(new Date()).getTimezoneOffset();
Mz="p="+Mp+"&rn="+Mrn+"&t="+Mt;
Md.cookie="b=b";Mc=0;if(Md.cookie)Mc=1;Mz+='&c='+Mc;
Msl="1.0";
//--></SCRIPT>

            <SCRIPT language=javascript1.1><!--
Mpl="";Msl="1.1";Mj = (Mnv.javaEnabled()?"Y":"N");Mz+='&j='+Mj;
//--></SCRIPT>

            <SCRIPT language=javascript1.2><!--         
Msl="1.2";
//--></SCRIPT>

            <SCRIPT language=javascript1.3><!--
Msl="1.3";//--></SCRIPT>

            <SCRIPT language=javascript><!--
Mu="u6485.81.spylog.com";My="";
My+="<a href='http://"+Mu+"/cnt?cid=648581&f=3&p="+Mp+"&rn="+Mrn+"' target='_blank'>";
My+="<img src='http://"+Mu+"/cnt?cid=648581&"+Mz+"&sl="+Msl+"&r="+escape(Md.referrer)+"&pg="+escape(window.location.href)+"' border=0  width=88 height=31  alt='SpyLOG'>";
My+="</a>";Md.write(My);//--></SCRIPT>
            <NOSCRIPT><A 
            href="http://u6485.81.spylog.com/cnt?cid=648581&amp;f=3&amp;p=1" 
            target=_blank><IMG alt=SpyLOG border=0 height=31 
            src="http://u6485.81.spylog.com/cnt?cid=648581&amp;p=1" width=88> 
            </A></NOSCRIPT><!-- SpyLOG  -->
            <DIV></DIV></DIV></TD></TR></TBODY></TABLE><BR>
      <TABLE bgColor=#000000 border=0 cellPadding=1 cellSpacing=0 width=150>
        <TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#f3e1af border=0 cellPadding=3 cellSpacing=0 
            width="100%">
              <TBODY>
              <TR>
                <TD align=left><FONT class=content 
                  color=#363636><B>Экспорт</B></FONT> 
        </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <TABLE border=0 cellPadding=3 cellSpacing=0 width=150>
        <TBODY>
        <TR vAlign=top>
          <TD>
            <DIV align=center><A href="http://www.apachedev.ru/export.xml"><IMG 
            border=0 src="/images/rss.gif"></A></DIV></TD></TR></TBODY></TABLE><BR></TD>
    <TD><IMG alt="" border=0 height=1 src="themes/Karate/images/pixel.gif" 
      width=15></TD>
    <TD width="100%">
      <TABLE bgColor=#efce68 border=0 cellPadding=0 cellSpacing=1 
        width="100%"><TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#efefef border=0 cellPadding=8 cellSpacing=1 
            width="100%">
              <TBODY>
              <TR>
                <TD>
                  <CENTER>
                  <FORM name=gocat>
                  <TABLE>
                    <TBODY>
                    <TR>
                      <TD><SELECT name=cat 
                        onchange=location.href=gocat.cat.options[selectedIndex].value><OPTION 
                          selected value="">Выбор категории</OPTION><OPTION 
                          value=modules.php?name=Pages&amp;go=showcat&amp;cid=16>The 
                          Apache Modeling Project</OPTION><OPTION 
                          value=modules.php?name=Pages&amp;go=showcat&amp;cid=5>Архитектура 
                          Apache</OPTION><OPTION 
                          value=modules.php?name=Pages&amp;go=showcat&amp;cid=17>Безопасность</OPTION><OPTION 
                          value=modules.php?name=Pages&amp;go=showcat&amp;cid=6>Модули 
                          Apache</OPTION><OPTION 
                          value=modules.php?name=Pages&amp;go=showcat&amp;cid=14>Основы 
                          Apache</OPTION><OPTION 
                          value=modules.php?name=Pages>Начало 
                        раздела</OPTION></SELECT></TD></TR></TBODY></TABLE></FORM>
                  <HR>
                  <B>Основы Apache</B><BR>Установка. Настройка. Базовые 
                  принципы.</CENTER></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR>
      <TABLE bgColor=#efce68 border=0 cellPadding=0 cellSpacing=1 
        width="100%"><TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#efefef border=0 cellPadding=8 cellSpacing=1 
            width="100%">
              <TBODY>
              <TR>
                <TD>
                  <H2 align=center>Написание фильтров для Apache 2.0</H2>
                  <P align=left>Автор: Райн Блум (Ryan Bloom)<BR>Перевод: 
                  ApacheDev.ru <BR></P>
                  <DIV align=right><A 
                  href="http://www.onlamp.com/pub/a/apache/2001/08/23/apache_2.html">Оригинал 
                  статьи</A></DIV>
                  <P>Когда разработчики начали впервые обсуждать Apache 2.0, 
                  одной из главных целей была в том, чтобы сделать так, чтобы 
                  один модуль мог модифицировать данные, полученные от другого. 
                  Эта возможность была реализована только в шестой альфа-версии. 
                  Механизм, использовавшийся для осуществления этих 
                  возможностей, называется - фильтры. Изначально написание 
                  фильтров было нелегким делом, но в течение нескольких 
                  последних релизов, разработчики усовершенствовали интерфейс, 
                  поэтому теперь фильтры создавать гораздо легче. </P>
                  <P>Эта статья описывает основные концепции фильтров Apache. В 
                  моей следующей статье, я проведу вас через процесс создание 
                  фильтра. В этой статье я также приведу некоторые концепции 
                  написания входных фильтров. </P>
                  <H4>Стандартные фильтры. </H4>
                  <P>Фильтры функционируют, потому что разработчики Apache 
                  рассматривают веб-страницы как блоки <FONT 
                  color=#9999ff><I>(chunk)</I></FONT> информации. В общем, мы не 
                  должны заботиться о том, на что эти блоки похожи или о том, 
                  как они хранятся на сервере. В терминологии фильтров Apache, 
                  каждый блок храниться в контейнере<FONT color=#9999ff><I> 
                  (bucket)</I></FONT>, а список контейнеров формируют бригаду 
                  <FONT color=#9999ff><I>(brigade)</I></FONT>. Список бригад 
                  затем может сформировать веб-документ. Фильтр работает с одной 
                  бригадой за раз, и он повторно вызываются до тех пор, пока 
                  весь документ не будет обработан. Это позволяет серверу 
                  передавать данные клиенту потоком. </P>
                  <P>Основная поставка Apache содержит несколько стандартных 
                  фильтров. </P>
                  <TABLE align=right border=1 cellPadding=1 cellSpacing=2 
                  style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; BORDER-TOP: rgb(204,204,204) 1px solid; MARGIN: 8px" 
                  width=250>
                    <TBODY>
                    <TR>
                      <TD bgColor=#ffffff 
                      style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BORDER-RIGHT: medium none; BORDER-TOP: medium none" 
                      vAlign=top width=250>
                        <P class=smalltext><A 
                        href="http://bolero.ru//cgi-bin/basket.cgi?act_add=yes&amp;pid=27523686&amp;num=1&amp;partner=apachedev&amp;new=1"><IMG 
                        align=left 
                        alt="  Perl. Сборник рецептов. Для профессионалов. 2-е издание&#13;&#10; " 
                        border=0 src="/images/books/5.gif"></A> <B><A 
                        href="http://bolero.ru//cgi-bin/basket.cgi?act_add=yes&amp;pid=27523686&amp;num=1&amp;partner=apachedev&amp;new=1">Perl. 
                        Сборник рецептов. Для профессионалов. 2-е издание 
                        </A></B><BR>Том Кристиансен, Натан Торкингтон<BR>Питер, 
                        928 стр.<BR>Цена: 462,00 руб. <BR><A 
                        href="http://bolero.ru//cgi-bin/dsc.cgi?27523686&amp;partner=apachedev&amp;new=1">Подробнее</A> 
                        <A 
                        href="http://bolero.ru//cgi-bin/basket.cgi?act_add=yes&amp;pid=27523686&amp;num=1&amp;partner=apachedev&amp;new=1">Купить</A> 
                        </P></TD></TR></TBODY></TABLE>
                  <P>Первый это <FONT 
                  color=#9999ff><I>content_length_filter</I></FONT>. Этот фильтр 
                  подсчитывает длину ответа сервера в байтах, если это возможно. 
                  Если ответ сервера недоступен в полном объеме, при первом 
                  вызове фильтра и, если протокол позволяет серверу отсылать 
                  ответ без заголовка content-length, тогда этот фильтр просто 
                  пропускает данные к следующему фильтру. Тем не менее, он 
                  продолжает подсчитывать байты для ведения логов. </P>
                  <P>Второй стандартный фильтр это <FONT 
                  color=#9999ff><I>header_filter</I></FONT>. При первом вызове 
                  этого фильтра, он формирует список заголовков и отсылает их 
                  следующему фильтру перед отправкой текущей веб-страницы. Это 
                  важно, потому что, если ваш фильтр захочет изменить заголовки, 
                  он должен быть вставлен до header_filter и он должен сохранять 
                  всю страницу до тех пор, пока не сделает все изменения в 
                  заголовках. Когда ваш фильтр пропускает данные к следующему 
                  фильтру в стеке, вы тем самым сообщаете серверу Apache, что вы 
                  закончили работать с данными, и он может отсылать их 
                  клиенту.</P>
                  <P>Последний фильтр - это всегда <FONT 
                  color=#9999ff><I>core_output_filter</I></FONT>. Этот фильтр 
                  отвечает за отправку всех данных в сеть. Для оптимального 
                  использования пропускной способности сети, Apache буферизирует 
                  данные по 9 KB перед отправкой клиенту. Тем не менее, фильтры 
                  могут заставить Apache отправлять данные немедленно, очистив 
                  текущий стек фильтров. </P>
                  <H4>Типы фильтров и их значения.</H4>
                  <P>Перед тем как фильтр может получать запросы, он должен быть 
                  зарегистрирован на сервере. Это делается функцией <FONT 
                  color=#9999ff><I>ap_register_output_filter</I></FONT>. Эта 
                  функция вызывается с тремя аргументами: имя фильтра, указатель 
                  на функцию фильтра и тип фильтра.</P>
                  <P><FONT 
                  color=#9999ff><I>ap_register_output_filter("CONTENT_LENGTH", 
                  <BR>ap_content_length_filter, <BR>AP_FTYPE_HTTP_HEADER); 
                  </I></FONT></P>
                  <P>Имя фильтра должно быть уникальным в пространстве имен 
                  сервера. Два фильтра не могут использовать одинаковую строку 
                  для своих имен. В связи с этим, рекомендуется, чтобы имена 
                  фильтров обладали некоторой уникальной защитой имен для 
                  каждого модуля. Функция фильтра - это функция, которая должна 
                  быть добавлена в стек фильтров всякий раз, когда этот фильтр 
                  определяется. В следующий раз, мы рассмотрим эту функцию более 
                  подробно. Также должен быть определен тип фильтра. Каждый 
                  фильтр имеет связанный с ним тип; это помогает Apache 
                  корректно упорядочивать фильтры. Ниже приведен список типов 
                  фильтров с их описанием:</P>
                  <BLOCKQUOTE>
                    <P>
                    <LI><FONT color=#9999ff><I>AP_FTYPE_CONTENT</I></FONT> Этот 
                    тип фильтров определяет, что фильтр будет использоваться для 
                    изменения содержания веб-страницы. Примеры фильтров этого 
                    типа: SSI или PHP.
                    <P></P>
                    <P></P>
                    <LI><I><FONT color=#9999ff>AP_FTYPE_HTTP_HEADER</FONT></I> 
                    Это специальный тип фильтра, который дает возможность 
                    модулям изменять заголовки. Все фильтры данного типа 
                    запускаются после AP_TYPE_CONTENT фильтров. Примеры фильтров 
                    данного типа: content_length и http_header фильтры.
                    <P></P>
                    <P></P>
                    <LI><I><FONT color=#9999ff>AP_FTYPE_TRANSCODE</FONT></I> 
                    Тип, показывающий фильтры, которые могут изменять способ 
                    отсылки ответа клиенту, но не содержание ответа. Пример 
                    этого типа фильтров - фильтр chunking_filter, который 
                    разбивает ответ для клиента на блоки. Все фильтры этого типа 
                    запускаются после AP_FTYPE_HTTP_HEADER фильтров. 
                    <P></P>
                    <P></P>
                    <LI><I><FONT color=#9999ff>AP_FTYPE_CONNECTION 
                    </FONT></I>Фильтры этого типа используются для изменения 
                    способа интерпретации сервером HTTP данных. Эти фильтры не 
                    стоит использовать для изменения данных запроса или ответа, 
                    потому что эти фильтры вызываются после AP_FTYPE_TRANSCODE 
                    фильтров, поэтому в это время сервер уже создал заголовки 
                    для запроса и ответа. Пример этого типа фильтров - http_in 
                    фильтр, который разбирает составные запросы в одном 
                    соединении на индивидуальные запросы для обработки их 
                    сервером. 
                    <P></P>
                    <P></P>
                    <LI><I><FONT color=#9999ff>AP_FTYPE_NETWORK</FONT></I> 
                    Фильтры этого типа запускаются последними. Фильтры этого 
                    типа отвечают за чтения и записи данных в сеть. 
                    <P></P></LI></BLOCKQUOTE>
                  <P>Большинство фильтров создаются исключительно как фильтры 
                  AP_FTYPE_CONTENT типа. После того, как фильтр зарегистрирован 
                  на сервере, он может быть добавлен для обработки запросов. Это 
                  делается функцией <FONT 
                  color=#9999ff><I>ap_add_output_filter</I></FONT> и обычно 
                  определяется с помощью директивы <FONT 
                  color=#9999ff><I>SetFilter</I></FONT> в файле<I><FONT 
                  color=#9999ff> http.conf.</FONT></I> Функция <FONT 
                  color=#9999ff><I>ap_add_output_filter</I></FONT> принимает 
                  четыре аргумента: </P>
                  <TABLE align=left border=1 cellPadding=1 cellSpacing=2 
                  style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; BORDER-TOP: rgb(204,204,204) 1px solid; MARGIN: 8px" 
                  width=250>
                    <TBODY>
                    <TR>
                      <TD bgColor=#ffffff 
                      style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BORDER-RIGHT: medium none; BORDER-TOP: medium none" 
                      vAlign=top width=250>
                        <P class=smalltext><A 
                        href="http://bolero.ru//cgi-bin/basket.cgi?act_add=yes&amp;pid=22301894&amp;num=1&amp;partner=apachedev&amp;new=1"><IMG 
                        align=left 
                        alt=" Apache. Настольная книга администратора" border=0 
                        src="/images/books/4.gif"></A> <B><A 
                        href="http://bolero.ru//cgi-bin/basket.cgi?act_add=yes&amp;pid=22301894&amp;num=1&amp;partner=apachedev&amp;new=1">Apache. 
                        Настольная книга администратора </A></B><BR>Боуэн Р., 
                        Ридруэйо Д., Лиска А.<BR>ДиаСофт, 384 стр.<BR>Цена: 
                        242,00 руб. <BR><A 
                        href="http://bolero.ru//cgi-bin/dsc.cgi?22301894&amp;partner=apachedev&amp;new=1">Подробнее</A> 
                        <A 
                        href="http://bolero.ru//cgi-bin/basket.cgi?act_add=yes&amp;pid=22301894&amp;num=1&amp;partner=apachedev&amp;new=1">Купить</A> 
                        </P></TD></TR></TBODY></TABLE>
                  <P><I><FONT color=#9999ff>ap_add_output_filter(const char 
                  *name, void *ctx, request_rec *r, conn_rec *c);</FONT></I></P>
                  <P>Первый аргумент - это имя, под которым фильтр был 
                  зарегистрирован в функции <FONT 
                  color=#9999ff><I>ap_register_output_filter</I></FONT>. 
                  Аргумент <FONT color=#9999ff><I>ctx</I></FONT> это случайный 
                  указатель, который передается фильтру каждый раз, когда он 
                  вызывается. Это полезно, когда одна функция имеет несколько 
                  вариантов исполнения. Последние два аргумента <FONT 
                  color=#9999ff><I>request_rec</I></FONT> и <FONT 
                  color=#9999ff><I>conn_rec</I></FONT>, фильтр использует каждый 
                  раз, когда он вызывается. Если аргумент <FONT 
                  color=#9999ff><I>request_rec</I></FONT> недоступен, то он 
                  должен быть NULL. Если<FONT color=#9999ff><I> 
                  request_rec</I></FONT> имеет значение NULL, тогда conn_rec 
                  должен быть определен. Это позволяет использовать одну цепочку 
                  фильтров для запроса и подзарпосов, без обращений к Apache для 
                  определения какой запрос пришел от какого фильтра. Связывание 
                  запроса с фильтром происходит, когда фильтр добавляется в стек 
                  фильтров. </P>
                  <P>Эта статья только поверхностно рассмотрела интерфейс 
                  фильтров, и мы выделим следующие две статьи для углубления в 
                  эту тему. Написание фильтров это сложная задача, но они могут 
                  стать мощным инструментом для расширения сервера. </P>
                  <CENTER></CENTER>
                  <HR>
                  Дата публикации: 08/04/2005<BR>Прочитано: 1020 
                  раз<BR><B>Дополнительно на данную тему:</B>
                  <HR>
                  <IMG border=0 height=14 
                  src="modules/Pages/images/page_pic.gif" width=10> <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages&amp;go=page&amp;pid=4" 
                  style="TEXT-DECORATION: none"><B>Установка Apache 
                  2.0</B></A><BR><IMG border=0 height=14 
                  src="modules/Pages/images/page_pic.gif" width=10> <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages&amp;go=page&amp;pid=5" 
                  style="TEXT-DECORATION: none"><B>Переход с сервера Apache 1.3 
                  на Apache 2.0</B></A><BR><IMG border=0 height=14 
                  src="modules/Pages/images/page_pic.gif" width=10> <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages&amp;go=page&amp;pid=7" 
                  style="TEXT-DECORATION: none"><B>Написание выходных фильтров 
                  Apache 2.0</B></A><BR><IMG border=0 height=14 
                  src="modules/Pages/images/page_pic.gif" width=10> <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages&amp;go=page&amp;pid=8" 
                  style="TEXT-DECORATION: none"><B>Написание входных фильтров 
                  Apache 2.0</B></A><BR><IMG border=0 height=14 
                  src="modules/Pages/images/page_pic.gif" width=10> <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages&amp;go=page&amp;pid=9" 
                  style="TEXT-DECORATION: none"><B>Модули Apache 
                  2.0</B></A><BR><IMG border=0 height=14 
                  src="modules/Pages/images/page_pic.gif" width=10> <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages&amp;go=page&amp;pid=10" 
                  style="TEXT-DECORATION: none"><B>Основы управления ресурсами в 
                  Apache: APR Пулы 
        (pools)</B></A><BR></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR>
      <TABLE bgColor=#efce68 border=0 cellPadding=0 cellSpacing=1 
        width="100%"><TBODY>
        <TR>
          <TD>
            <TABLE bgColor=#efefef border=0 cellPadding=8 cellSpacing=1 
            width="100%">
              <TBODY>
              <TR>
                <TD>
                  <CENTER><A href="javascript:history.go(-1)">Назад</A> | <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages">Начало</A> 
                  | <A 
                  href="http://www.apachedev.ru/modules.php?name=Pages&amp;go=page&amp;pid=6#">Наверх</A></CENTER></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE align=center bgColor=#000000 border=0 cellPadding=0 cellSpacing=0 
width=750>
  <TBODY>
  <TR>
    <TD height=5 width=750><IMG alt="" border=0 height=5 
      src="themes/ApacheDev/images/bottombar.gif" width=750></TD></TR>
  <TR>
    <TD width="100%"><IMG alt="" border=0 height=1 
      src="themes/ApacheDev/images/pixel.gif" 
width=1></TD></TR></TBODY></TABLE><BR><BR>
<TABLE align=center border=0 cellPadding=0 cellSpacing=0 width=750>
  <TBODY>
  <TR align=middle>
    <TD colSpan=3 width="100%"><FONT class=footmsg>Web site engine code is 
      Copyright © 2003 by <A href="http://phpnuke.org/"><FONT 
      class=footmsg_l>PHP-Nuke</FONT></A>. All Rights Reserved. PHP-Nuke is Free 
      Software released under the <A href="http://www.gnu.org/"><FONT 
      class=footmsg_l>GNU/GPL license</FONT></A>.<BR>Открытие страницы: 0.03 
      секунды<BR></FONT></TR></TBODY></TABLE></BODY></HTML>
